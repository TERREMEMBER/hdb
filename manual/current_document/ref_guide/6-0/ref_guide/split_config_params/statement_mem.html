
<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <!-- Always force latest IE rendering engine or request Chrome Frame -->
  <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
  <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,300italic,400italic,400,600' rel='stylesheet' type='text/css'>
  <!-- Use title if it's in the page YAML frontmatter -->
  <title>
    Greenplum Database Docs
  </title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="../../../stylesheets/all.css" rel="stylesheet" media="screen, print" />
  <link href="../../../stylesheets/print.css" rel="stylesheet" media="print" />
  <link href='../../../images/favicon.ico' rel='shortcut icon'>
  
</head>

<body class="x6-0 x6-0_ref_guide x6-0_ref_guide_config_params x6-0_ref_guide_config_params_guc-list has-subnav">
<div class="topic nested1" id="statement_mem">
<h2 class="title topictitle2">statement_mem</h2>
<div class="body">
<div class="note note">
<span class="notetitle">Note:</span> 仅当资源管理设置为资源队列时，<samp class="ph codeph">statement_mem</samp>服务器配置参数才会生效。
        </div>
<p class="p">为每个查询分配segment主机内存。
        使用此参数分配的内存量不能超过<samp class="ph codeph"><a class="xref" href="guc-list.html#max_statement_mem">max_statement_mem</a></samp>或提交查询的资源队列的内存限制。
        当<samp class="ph codeph"><a class="xref" href="guc-list.html#gp_resqueue_memory_policy">gp_resqueue_memory_policy</a> =auto</samp>时，
        <samp class="ph codeph">statement_mem</samp>和资源队列内存限制控制查询内存使用量。
        </p>
<p class="p">如果查询需要额外的内存，则使用磁盘上的临时溢出文件。
        </p>
<p class="p">该计算可用于估计各种情况的合理值。
        </p>
<pre class="pre codeblock">( <var class="keyword varname">gp_vmem_protect_limit</var>GB * .9 ) / <var class="keyword varname">max_expected_concurrent_queries</var></pre>
<p class="p">将<var class="keyword varname">gp_vmem_protect_limit</var>设置为8192MB（8GB）并假设最多包含10%缓冲的40个并发查询
        </p>
<div class="p">
<pre class="pre codeblock">(8GB * .9) / 40 = .18GB = 184MB</pre>
</div>
<p class="p">更改<samp class="ph codeph">max_statement_mem</samp>和<samp class="ph codeph">statement_mem</samp>时，
        必须先更改<samp class="ph codeph">max_statement_mem</samp>，或者先在<samp class="ph systemoutput">postgresql.conf</samp>文件中列出。
        </p>
<div class="tablenoborder">
<table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" id="statement_mem__statement_mem_table" rules="all" summary="">
<thead align="left" class="thead">
<tr class="row">
<th class="entry" id="d62161e18696" valign="top" width="33.33333333333333%">取值范围</th>
<th class="entry" id="d62161e18699" valign="top" width="33.33333333333333%">默认值</th>
<th class="entry" id="d62161e18702" valign="top" width="33.33333333333333%">设置分类</th>
</tr>
</thead>
<tbody class="tbody">
<tr class="row">
<td class="entry" headers="d62161e18696" valign="top" width="33.33333333333333%">KB</td>
<td class="entry" headers="d62161e18699" valign="top" width="33.33333333333333%">128MB</td>
<td class="entry" headers="d62161e18702" valign="top" width="33.33333333333333%">master<p class="p">session</p>
<p class="p">reload</p>
</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<script type="application/javascript">
window.addEventListener('DOMContentLoaded',function(){
	var tags=document.getElementsByTagName('a');
  for(var i=0;i<tags.length;i++){
	  tags[i].removeAttribute('href');
  }
});
</script>
</body>
</html>
