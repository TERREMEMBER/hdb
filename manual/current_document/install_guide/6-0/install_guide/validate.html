<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <!-- Always force latest IE rendering engine or request Chrome Frame -->
  <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">

  
  <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,300italic,400italic,400,600' rel='stylesheet' type='text/css'>
  <!-- Use title if it's in the page YAML frontmatter -->
  <title>
      Validating Your Systems |
    inHybrid Database Docs
  </title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="../../stylesheets/all.css" rel="stylesheet" media="screen, print" />
  <link href="../../stylesheets/print.css" rel="stylesheet" media="print" />
  <link href='../../images/favicon.ico' rel='shortcut icon'>

  <script src="../../javascripts/all.js"></script>
  
</head>

<body class="x6-4 x6-4_install_guide x6-4_install_guide_validate has-subnav">

<div class="viewport">
  <div class='wrap'>
    <script type="text/javascript">

    </script>

     
  <header class="header header-layout">
    <h1 class="logo">
      <a href="../../index.html">inHybrid Database Documentation</a>
    </h1>
    
    <div class="header-links js-bar-links">
      <div class="btn-menu" data-behavior="MenuMobile"></div>
      <div class="header-item"><a href="https://greenplum.org">Back to inHybrid Database</a></div>
      <div class="header-item">
        <a href="https://github.com/greenplum-db/hdb/wiki">Wiki</a>
      </div>
      
    </div>
  </header>


    <div class="container">

      <!--googleoff: index-->
      <div id="sub-nav" class="nav-container js-sidenav" role="navigation" >
  <a class="sidenav-title" data-behavior="SubMenuMobile">
    Doc Index
  </a>
  <div class="nav-content">
    
  <ul>
    
      <li class="">
        <a href="../homenav.html">inspur inHybrid 6.4 Documentation</a>
        

      </li>
    
      <li class="has_submenu">
        <a href="install_guide.html">Installation Guide</a>
        
  <ul>
    
      <li class="">
        <a href="platform-requirements.html">Platform Requirements</a>
        

      </li>
    
      <li class="has_submenu">
        <a href="preinstall_concepts.html">Introduction to inHybrid</a>
        
  <ul>
    
      <li class="">
        <a href="preinstall_concepts.html#topic2">The inHybrid Master</a>
        

      </li>
    
      <li class="">
        <a href="preinstall_concepts.html#topic4">The Segments</a>
        

      </li>
    
      <li class="">
        <a href="preinstall_concepts.html#topic9">The Interconnect</a>
        

      </li>
    
      <li class="">
        <a href="preinstall_concepts.html#topic13">ETL Hosts for Data Loading</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="has_submenu">
        <a href="capacity_planning.html">Estimating Storage Capacity</a>
        
  <ul>
    
      <li class="">
        <a href="capacity_planning.html#topic2">Calculating Usable Disk Capacity</a>
        

      </li>
    
      <li class="">
        <a href="capacity_planning.html#topic3">Calculating User Data Size</a>
        

      </li>
    
      <li class="">
        <a href="capacity_planning.html#topic4">Calculating Space Requirements for Metadata and Logs</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="">
        <a href="prep_os.html">Configuring Your Systems</a>
        

      </li>
    
      <li class="">
        <a href="install_hdb.html">Installing the inHybrid Database Software</a>
        

      </li>
    
      <li class="">
        <a href="create_data_dirs.html">Creating the Data Storage Areas</a>
        

      </li>
    
      <li class="has_submenu">
        <a href="validate.html">Validating Your Systems</a>
        
  <ul>
    
      <li class="">
        <a href="validate.html#topic4">Validating Network Performance</a>
        

      </li>
    
      <li class="">
        <a href="validate.html#topic5">Validating Disk I&#x2F;O and Memory Bandwidth</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="">
        <a href="init_hdb.html">Initializing a inHybrid Database System</a>
        

      </li>
    
      <li class="">
        <a href="install_modules.html">Installing Additional Supplied Modules</a>
        

      </li>
    
      <li class="">
        <a href="localization.html">Configuring Timezone and Localization Settings</a>
        

      </li>
    
      <li class="">
        <a href="upgrading.html">Upgrading from an Earlier inHybrid 6 Release</a>
        

      </li>
    
      <li class="">
        <a href="migrate.html">Migrating Data from inHybrid 4.3 or 5</a>
        

      </li>
    
      <li class="">
        <a href="enable_iptables.html">Enabling iptables (Optional)</a>
        

      </li>
    
      <li class="">
        <a href="apx_mgmt_utils.html">Installation Management Utilities</a>
        

      </li>
    
      <li class="has_submenu">
        <a href="env_var_ref.html">inHybrid Environment Variables</a>
        
  <ul>
    
      <li class="">
        <a href="env_var_ref.html#topic2">Required Environment Variables</a>
        

      </li>
    
      <li class="">
        <a href="env_var_ref.html#topic7">Optional Environment Variables</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="">
        <a href="ansible-example.html">Example Ansible Playbook</a>
        

      </li>
    
  </ul>


      </li>
    
  </ul>


  </div>
</div>

      <!--googleon: index-->

      <main class="content content-layout" id="js-content" role="main">
        <a id="top"></a>
        
          <h1 class="title-container" style="display: none;">
    Validating Your Systems
  </h1>

          <div id="js-quick-links" >
            
          </div>
        <div class="to-top" id="js-to-top">
          <a href="validate.html#top" title="back to top"></a>
        </div>
        

  <h1 class="title topictitle1">验证您的系统</h1>

  
  <div class="body">
<p class="shortdesc">验证硬件和网络性能。</p>

    <p class="p">inHybrid提供了一个名为hdbcheckperf的管理工具，可用于识别inHybrid数据库数组中的机器上的硬件和系统级问题。hdbcheckperf在指定的主机上启动一个会话，并运行以下性能测试:</p>

    <ul class="ul" id="topic1__ul_s14_dcj_zhb">
      <li class="li" id="topic1__jj165025">网络性能(gpnetbench*)</li>

      <li class="li" id="topic1__jj165034">磁盘I/O性能(dd测试)</li>

      <li class="li" id="topic1__jj165035">内存带宽(流测试)</li>

    </ul>

    <p class="p">在使用hdbcheckperf之前，必须在性能测试中涉及的主机之间建立一个受信任的主机设置。如果还没有更新已知主机文件，可以使用hdbssh-exkeys工具在主机之间交换公钥。请注意，hdbcheckperf调用hdbssh和hdbscp，因此这些inHybrid工具必须位于您的$PATH中。</p>

  </div>

  <div class="related-links">
<ul class="ullinks">
<li class="link ulchildlink">
<strong><a href="validate.html#topic4">验证网络性能</a></strong><br>
</li>
<li class="link ulchildlink">
<strong><a href="validate.html#topic5">验证磁盘I/O和内存带宽</a></strong><br>
</li>
</ul>

<div class="familylinks">
<div class="parentlink">
<strong>Parent topic:</strong> <a class="link" href="install_guide.html" title="Information about installing, configuring, and upgrading inHybrid Database software and configuring inHybrid Database host machines.">安装和升级inHybrid</a>
</div>
</div>
</div>
<div class="topic nested1" xml:lang="en" lang="en" id="topic4">
    <h2 class="title topictitle2">验证网络性能</h2>

    <div class="body">
      <p class="p">测试网络性能,运行hdbcheckperf网络测试运行选项之一:平行双测试(- r N),连续两测试(- r N),或完整矩阵测试(- r M)。该实用程序运行一个网络基准程序转移5秒的数据从当前主机到每个远程主机包含在测试。默认情况下，数据并行传输到每个远程主机，最小、最大、平均和中位数网络传输速率以每秒兆字节(MB)为单位报告。如果汇总传输速率低于预期(小于100 MB/s)，可以使用-r n选项连续运行网络测试，以获得每个主机的结果。要运行全矩阵带宽测试，可以指定-r M，这将导致每个主机从指定的每个其他主机发送和接收数据。此测试最好用于验证交换机结构是否能够承受全矩阵工作负载。</p>

      <p class="p">inHybrid数据库阵列中的大多数系统都配置了多个网络接口卡(NIC)，每个NIC都位于自己的子网上。在测试网络性能时，单独测试每个子网是很重要的。例如，考虑每个主机两个nic的网络配置:</p>

      
<div class="tablenoborder">
<table cellpadding="4" cellspacing="0" summary="" id="topic4__jj165255" class="table" frame="border" border="1" rules="all">
<caption><span class="tablecap">表1. 示例网络接口配置</span></caption>
          
          
          
          <thead class="thead" align="left">
            <tr class="row">
              <th class="entry" valign="top" width="139pt" id="d17815e150">inHybrid Host</th>

              <th class="entry" valign="top" width="118pt" id="d17815e153">Subnet1 NICs</th>

              <th class="entry" valign="top" width="118pt" id="d17815e156">Subnet2 NICs</th>

            </tr>

          </thead>

          <tbody class="tbody">
            <tr class="row">
              <td class="entry" valign="top" width="139pt" headers="d17815e150 ">Segment 1</td>

              <td class="entry" valign="top" width="118pt" headers="d17815e153 ">sdw1-1</td>

              <td class="entry" valign="top" width="118pt" headers="d17815e156 ">sdw1-2</td>

            </tr>

            <tr class="row">
              <td class="entry" valign="top" width="139pt" headers="d17815e150 ">Segment 2</td>

              <td class="entry" valign="top" width="118pt" headers="d17815e153 ">sdw2-1</td>

              <td class="entry" valign="top" width="118pt" headers="d17815e156 ">sdw2-2</td>

            </tr>

            <tr class="row">
              <td class="entry" valign="top" width="139pt" headers="d17815e150 ">Segment 3</td>

              <td class="entry" valign="top" width="118pt" headers="d17815e153 ">sdw3-1</td>

              <td class="entry" valign="top" width="118pt" headers="d17815e156 ">sdw3-2</td>

            </tr>

          </tbody>

        </table>
</div>

      <p class="p">您将创建四个不同的主机文件，用于hdbcheckperf网络测试:</p>

      
<div class="tablenoborder">
<table cellpadding="4" cellspacing="0" summary="" id="topic4__jj165603" class="table" frame="border" border="1" rules="all">
<caption><span class="tablecap">表2.示例网络测试主机文件内容</span></caption>
          
          
          <thead class="thead" align="left">
            <tr class="row">
              <th class="entry" valign="top" width="188pt" id="d17815e225">hostfile_gpchecknet_ic1</th>

              <th class="entry" valign="top" width="188pt" id="d17815e228">hostfile_gpchecknet_ic2</th>

            </tr>

          </thead>

          <tbody class="tbody">
            <tr class="row">
              <td class="entry" valign="top" width="188pt" headers="d17815e225 ">sdw1-1</td>

              <td class="entry" valign="top" width="188pt" headers="d17815e228 ">sdw1-2</td>

            </tr>

            <tr class="row">
              <td class="entry" valign="top" width="188pt" headers="d17815e225 ">sdw2-1</td>

              <td class="entry" valign="top" width="188pt" headers="d17815e228 ">sdw2-2</td>

            </tr>

            <tr class="row">
              <td class="entry" valign="top" width="188pt" headers="d17815e225 ">sdw3-1</td>

              <td class="entry" valign="top" width="188pt" headers="d17815e228 ">sdw3-2</td>

            </tr>

          </tbody>

        </table>
</div>

      <p class="p">然后，您将对每个子网运行一次hdbcheckperf。例如(如果测试偶数台主机，以并行对测试模式运行):</p>

      <pre class="pre codeblock">$ hdbcheckperf -f hostfile_gpchecknet_ic1 -r N -d /tmp &gt; subnet1.out
$ hdbcheckperf -f hostfile_gpchecknet_ic2 -r N -d /tmp &gt; subnet2.out</pre>

      <p class="p">如果要测试的主机数量为奇数，可以以串行测试模式(-r n)运行。</p>

    </div>

  <div class="related-links">
<div class="familylinks">
<div class="parentlink">
<strong>Parent topic:</strong> <a class="link" href="validate.html" title="Validate your hardware and network performance.">验证您的系统 </a>
</div>
</div>
</div>
</div>

  <div class="topic nested1" xml:lang="en" lang="en" id="topic5">
    <h2 class="title topictitle2">验证磁盘I/O和内存带宽</h2>

    <div class="body">
      <p class="p">要测试磁盘和内存带宽性能，请使用磁盘和流测试运行选项(-r ds)运行hdbcheckperf。磁盘测试使用dd命令(一个标准的UNIX实用程序)来测试逻辑磁盘或文件系统的连续吞吐量性能。内存测试使用流基准程序来测量可持续的内存带宽。结果以每秒MB (MB/s)为单位报告。</p>

      <div class="section" id="topic5__jj161569">
<h3 class="title sectiontitle">运行磁盘和流测试</h3>
        
        <ol class="ol">
          <li class="li" id="topic5__jj167791"> 作为hdbadmin用户登录主主机</li>

          <li class="li" id="topic5__jj167824">从您的inHybrid安装中获得greenplum_path.sh路径文件。例如:<pre class="pre codeblock">$ source /usr/local/greenplum-db/greenplum_path.sh</pre>
</li>

          <li class="li" id="topic5__jj167777">创建一个名为hostfile_hdbcheckperf的主机文件，每个Segment主机有一个主机名。不包括Master主机。例如<pre class="pre codeblock">sdw1
sdw2
sdw3
sdw4</pre>
</li>

          <li class="li" id="topic5__jj162990">使用刚才创建的hostfile_hdbcheckperf文件运行hdbcheckperf实用程序。使用-d选项指定要在每个主机上测试的文件系统(必须具有对这些目录的写访问权)。您将需要测试所有主Segment数据和镜像Segment数据目录位置。例如:<pre class="pre codeblock">$ hdbcheckperf -f hostfile_hdbcheckperf -r ds -D \
-d /data1/primary -d  /data2/primary \
-d /data1/mirror -d  /data2/mirror</pre>
</li>

          <li class="li" id="topic5__jj163241">该工具可能需要一段时间来执行测试，因为它正在主机之间复制非常大的文件。完成后，您将看到磁盘写、磁盘读和流测试的摘要结果。</li>

        </ol>

      </div>

    </div>

  <div class="related-links">
<div class="familylinks">
<div class="parentlink">
<strong>Parent topic:</strong> <a class="link" href="validate.html" title="Validate your hardware and network performance.">验证您的系统 </a>
</div>
</div>
</div>
</div>



        

      </main>
    </div>
  </div>
</div>

<div id="scrim"></div>

<div class="container">
  <footer class="site-footer-links">
    
  </footer>
</div><!--end of container-->

</body>
</html>
