<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <!-- Always force latest IE rendering engine or request Chrome Frame -->
  <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">

  
  <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,300italic,400italic,400,600' rel='stylesheet' type='text/css'>
  <!-- Use title if it's in the page YAML frontmatter -->
  <title>
      使用Kerberos认证 |
    inHybrid Database Docs
  </title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="../../stylesheets/all.css" rel="stylesheet" media="screen, print" />
  <link href="../../stylesheets/print.css" rel="stylesheet" media="print" />
  <link href='../../images/favicon.ico' rel='shortcut icon'>

  <script src="../../javascripts/all.js"></script>
  
</head>

<body class="x6-0 x6-0_admin_guide x6-0_admin_guide_kerberos has-subnav">

<div class="viewport">
  <div class='wrap'>
    <script type="text/javascript">
    </script>

     
  <header class="header header-layout">
    <h1 class="logo">
      <a href="http://47.92.231.67:8080/">inHybrid Database Documentation</a>
    </h1>
    
    <div class="header-links js-bar-links">
      <div class="btn-menu" data-behavior="MenuMobile"></div>
      <div class="header-item"><a href="https://greenplum.org">Back to inHybrid Database</a></div>
      <div class="header-item">
        <a href="https://github.com/greenplum-db/gpdb/wiki">Wiki</a>
      </div>
      
    </div>
  </header>


    <div class="container">

      <!--googleoff: index-->
      <div id="sub-nav" class="nav-container js-sidenav" role="navigation" >
  <a class="sidenav-title" data-behavior="SubMenuMobile">
    Doc Index
  </a>
  <div class="nav-content">
    
  <ul>
    
      <li class="">
        <a href="../homenav.html">inHybrid数据库 6.0文档</a>
        

      </li>
    
      <li class="has_submenu">
        <a href="admin_guide.html">管理员指南</a>
        
  <ul>
    
      <li class="has_submenu">
        <a href="intro/partI.html">inHybrid数据库概念</a>
        
  <ul>
    
      <li class="">
        <a href="intro/arch_overview.html">关于inHybrid的架构</a>
        

      </li>
    
      <li class="">
        <a href="intro/about_utilities.html">关于管理和监控工具</a>
        

      </li>
    
      <li class="has_submenu">
        <a href="intro/about_mvcc.html">关于inHybrid数据库中的并发控制</a>
        
  <ul>
    
      <li class="">
        <a href="intro/mvcc_example.html">管理事务ID的例子</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="">
        <a href="intro/about_loading.html">关于并行数据装载</a>
        

      </li>
    
      <li class="">
        <a href="intro/about_ha.html">关于inHybrid数据库中的冗余和故障切换</a>
        

      </li>
    
      <li class="">
        <a href="intro/about_statistics.html">关于inHybrid数据库中的数据库统计信息</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="has_submenu">
        <a href="managing/partII.html">管理一个inHybrid系统</a>
        
  <ul>
    
      <li class="">
        <a href="managing/versioning.html">关于inHybrid数据库发布版本号</a>
        

      </li>
    
      <li class="">
        <a href="managing/startstop.html">启动和停止inHybrid数据库</a>
        

      </li>
    
      <li class="has_submenu">
        <a href="access_db/topics/g-accessing-the-database.html">访问数据库</a>
        
  <ul>
    
      <li class="">
        <a href="access_db/topics/g-establishing-a-database-session.html">建立一个数据库会话</a>
        

      </li>
    
      <li class="">
        <a href="access_db/topics/g-supported-client-applications.html">支持的客户端应用</a>
        

      </li>
    
      <li class="">
        <a href="access_db/topics/g-greenplum-database-client-applications.html">inHybrid数据库客户端应用</a>
        

      </li>
    
      <li class="">
        <a href="access_db/topics/g-connecting-with-psql.html">用psql连接</a>
        

      </li>
    
      <li class="">
        <a href="access_db/topics/pgbouncer.html">使用PgBouncer连接池</a>
        

      </li>
    
      <li class="">
        <a href="access_db/topics/g-database-application-interfaces.html">数据库应用接口</a>
        

      </li>
    
      <li class="">
        <a href="access_db/topics/g-troubleshooting-connection-problems.html">连接问题的发现及解决</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="has_submenu">
        <a href="topics/g-configuring-the-greenplum-system.html">配置inHybrid数据库系统</a>
        
  <ul>
    
      <li class="">
        <a href="topics/g-about-greenplum-master-and-local-parameters.html">关于inHybrid数据库的Master参数和本地参数</a>
        

      </li>
    
      <li class="has_submenu">
        <a href="topics/g-setting-configuration-parameters.html">设置配置参数</a>
        
  <ul>
    
      <li class="">
        <a href="topics/g-setting-a-local-configuration-parameter.html">设置本地配置参数</a>
        

      </li>
    
      <li class="has_submenu">
        <a href="topics/g-setting-a-master-configuration-parameter.html">设置Master配置参数</a>
        
  <ul>
    
      <li class="">
        <a href="topics/g-setting-parameters-at-the-system-level.html">设置系统级别参数</a>
        

      </li>
    
      <li class="">
        <a href="topics/g-setting-parameters-at-the-database-level.html">设置数据库级别参数</a>
        

      </li>
    
      <li class="">
        <a href="topics/g-setting-parameters-at-the-role-level.html">设置角色级别参数</a>
        

      </li>
    
      <li class="">
        <a href="topics/g-setting-parameters-in-a-session.html">设置会话级别参数</a>
        

      </li>
    
  </ul>


      </li>
    
  </ul>


      </li>
    
      <li class="">
        <a href="topics/g-viewing-server-configuration-parameter-settings.html">查看服务器配置参数设置</a>
        

      </li>
    
      <li class="">
        <a href="topics/g-configuration-parameter-categories.html">配置参数种类</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="">
        <a href="managing/compression.html">启用压缩</a>
        

      </li>
    
      <li class="has_submenu">
        <a href="highavail/topics/g-enabling-high-availability-features.html">启用高可用和数据持久化特征</a>
        
  <ul>
    
      <li class="has_submenu">
        <a href="highavail/topics/g-overview-of-high-availability-in-greenplum-database.html">inHybrid数据库高可用性概述</a>
        
  <ul>
    
      <li class="">
        <a href="highavail/topics/g-overview-of-segment-mirroring.html">Segment镜像概述</a>
        

      </li>
    
      <li class="">
        <a href="highavail/topics/g-overview-of-master-mirroring.html">Master镜像概述</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="has_submenu">
        <a href="highavail/topics/g-enabling-mirroring-in-greenplum-database.html">在inHybrid数据库中启用镜像</a>
        
  <ul>
    
      <li class="">
        <a href="highavail/topics/g-enabling-segment-mirroring.html">启用Segment镜像</a>
        

      </li>
    
      <li class="">
        <a href="highavail/topics/g-enabling-master-mirroring.html">启用Master镜像</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="has_submenu">
        <a href="highavail/topics/g-detecting-a-failed-segment.html">检测故障的Segment</a>
        
  <ul>
    
      <li class="">
        <a href="highavail/topics/g-checking-for-failed-segments.html">检测故障Segment</a>
        

      </li>
    
      <li class="">
        <a href="highavail/topics/g-checking-the-log-files.html">检查日志文件</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="has_submenu">
        <a href="highavail/topics/g-recovering-a-failed-segment.html">恢复故障Segment</a>
        
  <ul>
    
      <li class="has_submenu">
        <a href="highavail/topics/g-recovering-from-segment-failures.html">从Segment故障中恢复</a>
        
  <ul>
    
      <li class="">
        <a href="highavail/topics/g-when-a-segment-host-is-not-recoverable.html">当一台Segment主机不可恢复时</a>
        

      </li>
    
  </ul>


      </li>
    
  </ul>


      </li>
    
      <li class="has_submenu">
        <a href="highavail/topics/g-recovering-a-failed-master.html">恢复故障的Master</a>
        
  <ul>
    
      <li class="">
        <a href="highavail/topics/g-restoring-master-mirroring-after-a-recovery.html">在恢复后还原Master镜像</a>
        

      </li>
    
  </ul>


      </li>
    
  </ul>


      </li>
    
      <li class="has_submenu">
        <a href="managing/backup-main.html">备份和恢复数据库</a>
        
  <ul>
    
      <li class="">
        <a href="managing/backup-overview.html">备份和恢复概述</a>
        

      </li>
    
      <li class="has_submenu">
        <a href="managing/backup-hdbbackup.html">使用hdbbackup和hdbrestore并行备份</a>
        
  <ul>
    
      <li class="">
        <a href="managing/backup-hdbbackup.html#topic_vh5_1hd_tbb">需求和限制</a>
        

      </li>
    
      <li class="">
        <a href="managing/backup-hdbbackup.html#topic_x3s_lqj_tbb">备份或还原中包含的对象</a>
        

      </li>
    
      <li class="">
        <a href="managing/backup-hdbbackup.html#topic_qgj_b3d_tbb">执行基本备份和还原操作</a>
        

      </li>
    
      <li class="">
        <a href="managing/backup-hdbbackup.html#topic_et4_b5d_tbb">过滤备份或恢复的内容</a>
        

      </li>
    
      <li class="">
        <a href="managing/backup-hdbbackup.html#topic_qwd_d5d_tbb">配置邮件通知</a>
        

      </li>
    
      <li class="">
        <a href="managing/backup-hdbbackup.html#topic_xnj_b4c_tbb">理解备份文件</a>
        

      </li>
    
      <li class="has_submenu">
        <a href="managing/backup-hdbbackup-incremental.html">使用hdbbackup和hdbrestore创建增量备份</a>
        
  <ul>
    
      <li class="">
        <a href="managing/backup-hdbbackup-incremental.html#topic_kvf_mkr_t2b">关于增量备份集</a>
        

      </li>
    
      <li class="">
        <a href="managing/backup-hdbbackup-incremental.html#topic_btr_xfr_t2b">使用增量备份</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="has_submenu">
        <a href="managing/backup-boostfs.html">将hdbbackup和hdbrestore与BoostFS一起使用</a>
        
  <ul>
    
      <li class="">
        <a href="managing/backup-boostfs.html#topic_zp4_mvv_bdb">安装BoostFS</a>
        

      </li>
    
      <li class="">
        <a href="managing/backup-boostfs.html#topic_t4z_tvv_bdb">使用BoostFS备份和恢复</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="has_submenu">
        <a href="managing/backup-plugins.html">使用hdbbackup存储插件</a>
        
  <ul>
    
      <li class="">
        <a href="managing/backup-s3-plugin.html">使用带有hdbbackup和hdbrestore的S3存储插件</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="has_submenu">
        <a href="managing/backup-plugin-api.html">备份&#x2F;恢复存储插件API（Beta版）</a>
        
  <ul>
    
      <li class="">
        <a href="managing/plugin_api/backup_data.html">backup_data</a>
        

      </li>
    
      <li class="">
        <a href="managing/plugin_api/backup_file.html">backup_file</a>
        

      </li>
    
      <li class="">
        <a href="managing/plugin_api/cleanup_plugin_for_backup.html">cleanup_plugin_for_backup</a>
        

      </li>
    
      <li class="">
        <a href="managing/plugin_api/cleanup_plugin_for_restore.html">cleanup_plugin_for_restore</a>
        

      </li>
    
      <li class="">
        <a href="managing/plugin_api/plugin_api_version.html">plugin_api_version</a>
        

      </li>
    
      <li class="">
        <a href="managing/plugin_api/restore_data.html">restore_data</a>
        

      </li>
    
      <li class="">
        <a href="managing/plugin_api/restore_file.html">restore_file</a>
        

      </li>
    
      <li class="">
        <a href="managing/plugin_api/setup_plugin_for_backup.html">setup_plugin_for_backup</a>
        

      </li>
    
      <li class="">
        <a href="managing/plugin_api/setup_plugin_for_restore.html">setup_plugin_for_restore</a>
        

      </li>
    
  </ul>


      </li>
    
  </ul>


      </li>
    
  </ul>


      </li>
    
      <li class="has_submenu">
        <a href="expand/expand-main.html">扩容inHybrid系统</a>
        
  <ul>
    
      <li class="">
        <a href="expand/expand-overview.html">系统扩容概述</a>
        

      </li>
    
      <li class="">
        <a href="expand/expand-planning.html">规划inHybrid系统扩容</a>
        

      </li>
    
      <li class="">
        <a href="expand/expand-nodes.html">准备并增加节点</a>
        

      </li>
    
      <li class="">
        <a href="expand/expand-initialize.html">初始化新节点</a>
        

      </li>
    
      <li class="">
        <a href="expand/expand-redistribute.html">重分布表</a>
        

      </li>
    
      <li class="">
        <a href="expand/expand-rm-schema.html">移除扩容Schema</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="">
        <a href="managing/monitor.html">监控inHybrid系统</a>
        

      </li>
    
      <li class="">
        <a href="managing/maintain.html">日常系统维护任务</a>
        

      </li>
    
      <li class="">
        <a href="monitoring/monitoring.html">Recommended Monitoring and Maintenance Tasks</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="has_submenu">
        <a href="partIII.html">管理inHybrid数据库访问</a>
        
  <ul>
    
      <li class="has_submenu">
        <a href="client_auth.html">配置客户端认证</a>
        
  <ul>
    
      <li class="">
        <a href="ldap.html">使用带TLS&#x2F;SSL的LDAP认证</a>
        

      </li>
    
      <li class="">
        <a href="kerberos.html">使用Kerberos认证</a>
        

      </li>
    
      <li class="">
        <a href="kerberos-lin-client.html">为Linux客户端进行Kerberos配置</a>
        

      </li>
    
      <li class="">
        <a href="kerberos-win-client.html">为Windows客户端进行Kerberos配置</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="">
        <a href="roles_privs.html">管理角色与权限</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="has_submenu">
        <a href="ddl/ddl.html">定义数据库对象</a>
        
  <ul>
    
      <li class="">
        <a href="ddl/ddl-database.html">创建和管理数据库</a>
        

      </li>
    
      <li class="">
        <a href="ddl/ddl-tablespace.html">创建和管理表空间</a>
        

      </li>
    
      <li class="">
        <a href="ddl/ddl-schema.html">创建和管理SCHEMA</a>
        

      </li>
    
      <li class="">
        <a href="ddl/ddl-table.html">创建和管理表</a>
        

      </li>
    
      <li class="">
        <a href="ddl/ddl-storage.html">选择表存储模型</a>
        

      </li>
    
      <li class="">
        <a href="ddl/ddl-partition.html">对大型表分区</a>
        

      </li>
    
      <li class="">
        <a href="ddl/ddl-sequence.html">创建和使用序列</a>
        

      </li>
    
      <li class="">
        <a href="ddl/ddl-index.html">在inHybrid数据库中使用索引</a>
        

      </li>
    
      <li class="">
        <a href="ddl/ddl-view.html">创建和管理视图</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="">
        <a href="distribution.html">分布与倾斜</a>
        

      </li>
    
      <li class="">
        <a href="dml.html">插入, 更新, 和删除数据 </a>
        

      </li>
    
      <li class="has_submenu">
        <a href="query/topics/query.html">查询数据</a>
        
  <ul>
    
      <li class="">
        <a href="query/topics/parallel-proc.html">关于inHybrid的查询处理</a>
        

      </li>
    
      <li class="has_submenu">
        <a href="query/topics/query-piv-optimizer.html">关于GPORCA</a>
        
  <ul>
    
      <li class="">
        <a href="query/topics/query-piv-opt-overview.html">GPORCA概述</a>
        

      </li>
    
      <li class="">
        <a href="query/topics/query-piv-opt-enable.html">启用和禁用GPORCA</a>
        

      </li>
    
      <li class="">
        <a href="query/topics/query-piv-opt-root-partition.html">收集根分区统计信息</a>
        

      </li>
    
      <li class="">
        <a href="query/topics/query-piv-opt-notes.html">使用GPORCA时的考虑</a>
        

      </li>
    
      <li class="">
        <a href="query/topics/query-piv-opt-features.html">GPORCA特性和增强</a>
        

      </li>
    
      <li class="">
        <a href="query/topics/query-piv-opt-changed.html">GPORCA改变的行为</a>
        

      </li>
    
      <li class="">
        <a href="query/topics/query-piv-opt-limitations.html">GPORCA的限制</a>
        

      </li>
    
      <li class="">
        <a href="query/topics/query-piv-opt-fallback.html">判断被使用的查询优化器</a>
        

      </li>
    
      <li class="">
        <a href="query/topics/query-piv-uniform-part-tbl.html">关于统一多级分区表</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="">
        <a href="query/topics/defining-queries.html">定义查询</a>
        

      </li>
    
      <li class="">
        <a href="query/topics/CTE-query.html">WITH查询（公用表表达式）</a>
        

      </li>
    
      <li class="">
        <a href="query/topics/functions-operators.html">使用函数和操作符</a>
        

      </li>
    
      <li class="">
        <a href="query/topics/json-data.html">使用JSON数据</a>
        

      </li>
    
      <li class="">
        <a href="query/topics/xml-data.html">使用XML数据</a>
        

      </li>
    
      <li class="has_submenu">
        <a href="textsearch/full-text-search.html">使用全文搜索</a>
        
  <ul>
    
      <li class="">
        <a href="textsearch/intro.html">关于全文搜索</a>
        

      </li>
    
      <li class="">
        <a href="textsearch/tables-indexes.html">在数据库表中搜索文本</a>
        

      </li>
    
      <li class="">
        <a href="textsearch/controlling.html">控制文本搜索</a>
        

      </li>
    
      <li class="">
        <a href="textsearch/features.html">文本搜索附加功能</a>
        

      </li>
    
      <li class="">
        <a href="textsearch/parsers.html">文本搜索解析器</a>
        

      </li>
    
      <li class="">
        <a href="textsearch/dictionaries.html">文本搜索词典</a>
        

      </li>
    
      <li class="">
        <a href="textsearch/configuration.html">文本搜索配置示例</a>
        

      </li>
    
      <li class="">
        <a href="textsearch/testing.html">测试和调试文本搜索</a>
        

      </li>
    
      <li class="">
        <a href="textsearch/gist-gin.html">文本搜索的GiST和GIN索引</a>
        

      </li>
    
      <li class="">
        <a href="textsearch/psql-support.html">psql支持</a>
        

      </li>
    
      <li class="">
        <a href="textsearch/limitations.html">限制</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="">
        <a href="query/topics/query-performance.html">查询性能</a>
        

      </li>
    
      <li class="">
        <a href="query/topics/spill-files.html">管理查询生成的溢出文件</a>
        

      </li>
    
      <li class="">
        <a href="query/topics/query-profiling.html">查询分析</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="has_submenu">
        <a href="external/g-working-with-file-based-ext-tables.html">使用外部数据</a>
        
  <ul>
    
      <li class="has_submenu">
        <a href="external/g-external-tables.html">定义外部表</a>
        
  <ul>
    
      <li class="">
        <a href="external/g-file-protocol.html">file:&#x2F;&#x2F;协议</a>
        

      </li>
    
      <li class="">
        <a href="external/g-hdbfdist-protocol.html">hdbfdist:&#x2F;&#x2F;协议</a>
        

      </li>
    
      <li class="">
        <a href="external/g-hdbfdists-protocol.html">hdbfdists:&#x2F;&#x2F; 协议</a>
        

      </li>
    
      <li class="">
        <a href="external/g-pxf-protocol.html">pxf:&#x2F;&#x2F; 协议</a>
        

      </li>
    
      <li class="">
        <a href="external/g-s3-protocol.html">s3:&#x2F;&#x2F; 协议</a>
        

      </li>
    
      <li class="">
        <a href="external/g-accessing-ext-files-custom-protocol.html">使用自定义协议</a>
        

      </li>
    
      <li class="">
        <a href="external/g-handling-errors-ext-table-data.html">处理外部表数据中的错误</a>
        

      </li>
    
      <li class="">
        <a href="external/g-creating-and-using-web-external-tables.html">创建和使用外部Web表</a>
        

      </li>
    
      <li class="has_submenu">
        <a href="external/g-creating-external-tables---examples.html">Examples for Creating External Tables</a>
        
  <ul>
    
      <li class="">
        <a href="external/g-example-1-single-hdbfdist-instance-on-single-nic-machine.html">Example 1―Single hdbfdist instance on single-NIC machine</a>
        

      </li>
    
      <li class="">
        <a href="external/g-example-2-multiple-hdbfdist-instances.html">Example 2―Multiple hdbfdist instances </a>
        

      </li>
    
      <li class="">
        <a href="external/g-example-3-multiple-hdbfdists-instances.html">Example 3―Multiple hdbfdists instances </a>
        

      </li>
    
      <li class="">
        <a href="external/g-example-4-single-hdbfdist-instance-with-error-logging.html">Example 4―Single hdbfdist instance with error logging</a>
        

      </li>
    
      <li class="">
        <a href="external/g-example-5-text-format-on-a-hadoop-distributed-file-server.html">Example 5―TEXT Format on a Hadoop Distributed File Server</a>
        

      </li>
    
      <li class="">
        <a href="external/g-example-6-multiple-files-in-csv-format-with-header-rows.html">Example 6―Multiple files in CSV format with header rows</a>
        

      </li>
    
      <li class="">
        <a href="external/g-example-7-readable-web-external-table-with-script.html">Example 7―Readable External Web Table with Script</a>
        

      </li>
    
      <li class="">
        <a href="external/g-example-8-writable-external-table-with-hdbfdist.html">Example 8―Writable External Table with hdbfdist</a>
        

      </li>
    
      <li class="">
        <a href="external/g-example-9-writable-external-web-table-with-script.html">Example 9―Writable External Web Table with Script</a>
        

      </li>
    
      <li class="">
        <a href="external/g-example-10-readable-and-writable-external-tables-with-xml-transformations.html">Example 10―Readable and Writable External Tables with XML Transformations</a>
        

      </li>
    
  </ul>


      </li>
    
  </ul>


      </li>
    
      <li class="">
        <a href="external/pxf-overview.html">使用PXF访问外部数据</a>
        

      </li>
    
      <li class="has_submenu">
        <a href="external/g-foreign.html">使用外部表访问外部数据</a>
        
  <ul>
    
      <li class="">
        <a href="external/g-devel-fdw.html">写一个外部数据的包装器</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="">
        <a href="external/g-using-the-greenplum-parallel-file-server--hdbfdist-.html">使用inHybrid的并行文件服务器（hdbfdist）</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="has_submenu">
        <a href="load/topics/g-loading-and-unloading-data.html">装载和卸载数据</a>
        
  <ul>
    
      <li class="">
        <a href="load/topics/g-loading-data-using-an-external-table.html">使用外部表装载数据</a>
        

      </li>
    
      <li class="has_submenu">
        <a href="load/topics/g-loading-and-writing-non-hdfs-custom-data.html">装载和写入非HDFS自定义数据</a>
        
  <ul>
    
      <li class="has_submenu">
        <a href="load/topics/g-using-a-custom-format.html">使用一种自定义格式</a>
        
  <ul>
    
      <li class="">
        <a href="load/topics/g-importing-and-exporting-fixed-width-data.html">导入和导出固定宽度的数据</a>
        

      </li>
    
      <li class="">
        <a href="load/topics/g-examples-read-fixed-width-data.html">例子：读取宽度固定的数据</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="">
        <a href="load/topics/g-using-a-custom-protocol.html">使用一种自定协议</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="has_submenu">
        <a href="load/topics/g-handling-load-errors.html">处理装载错误</a>
        
  <ul>
    
      <li class="">
        <a href="load/topics/g-define-an-external-table-with-single-row-error-isolation.html">定义一个带有单行错误隔离的外部表</a>
        

      </li>
    
      <li class="">
        <a href="load/topics/g-create-an-error-table-and-declare-a-reject-limit.html">捕捉行格式化错误并且声明拒绝极限 </a>
        

      </li>
    
      <li class="">
        <a href="load/topics/g-viewing-bad-rows-in-the-error-table-or-error-log.html">在错误日志中查看不正确的行</a>
        

      </li>
    
      <li class="">
        <a href="load/topics/g-moving-data-between-tables.html">在表之间移动数据</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="">
        <a href="load/topics/g-loading-data-with-hdbload.html">用hdbload装载数据</a>
        

      </li>
    
      <li class="">
        <a href="external/pxf-overview.html">使用PXF访问外部数据</a>
        

      </li>
    
      <li class="">
        <a href="load/topics/transforming-xml-data.html">使用hdbfdist和hdbload转换外部数据</a>
        

      </li>
    
      <li class="">
        <a href="load/topics/g-loading-data-with-copy.html">用COPY装载数据</a>
        

      </li>
    
      <li class="">
        <a href="load/topics/g-running-copy-in-single-row-error-isolation-mode.html">在单行错误隔离模式中运行COPY</a>
        

      </li>
    
      <li class="">
        <a href="load/topics/g-optimizing-data-load-and-query-performance.html">优化数据装载和查询性能</a>
        

      </li>
    
      <li class="has_submenu">
        <a href="load/topics/g-unloading-data-from-greenplum-database.html">从inHybrid数据库卸载数据</a>
        
  <ul>
    
      <li class="has_submenu">
        <a href="load/topics/g-defining-a-file-based-writable-external-table.html">定义基于文件的可写外部表</a>
        
  <ul>
    
      <li class="">
        <a href="load/topics/g-example-1-greenplum-file-server-hdbfdist.html">例 1―inHybrid文件服务器（hdbfdist）</a>
        

      </li>
    
      <li class="">
        <a href="load/topics/g-example-2-hadoop-file-server.html">例 2―Hadoop文件系统(pxf)</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="has_submenu">
        <a href="load/topics/g-defining-a-command-based-writable-external-web-table.html">定义基于命令的可写外部Web表</a>
        
  <ul>
    
      <li class="">
        <a href="load/topics/g-disabling-execute-for-web-or-writable-external-tables.html">为Web或者可写外部表禁用EXECUTE</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="">
        <a href="load/topics/g-unloading-data-using-a-writable-external-table.html">使用可写外部表卸载数据</a>
        

      </li>
    
      <li class="">
        <a href="load/topics/g-unloading-data-using-copy.html">使用COPY卸载数据</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="has_submenu">
        <a href="load/topics/g-formatting-data-files.html">格式化数据文件</a>
        
  <ul>
    
      <li class="">
        <a href="load/topics/g-formatting-rows.html">格式化行</a>
        

      </li>
    
      <li class="">
        <a href="load/topics/g-formatting-columns.html">格式化列</a>
        

      </li>
    
      <li class="">
        <a href="load/topics/g-representing-null-values.html">表示NULL值</a>
        

      </li>
    
      <li class="has_submenu">
        <a href="load/topics/g-escaping.html">转义</a>
        
  <ul>
    
      <li class="">
        <a href="load/topics/g-escaping-in-text-formatted-files.html">在文本格式的文件中转义</a>
        

      </li>
    
      <li class="">
        <a href="load/topics/g-escaping-in-csv-formatted-files.html">在CSV格式的文件中转义</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="">
        <a href="load/topics/g-character-encoding.html">字符编码</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="has_submenu">
        <a href="load/topics/g-example-custom-data-access-protocol.html">自定义数据访问协议实例 </a>
        
  <ul>
    
      <li class="has_submenu">
        <a href="load/topics/g-installing-the-external-table-protocol.html">安装外部表协议</a>
        
  <ul>
    
      <li class="">
        <a href="load/topics/g-gpextprotocal.c.html">gpextprotocal.c</a>
        

      </li>
    
  </ul>


      </li>
    
  </ul>


      </li>
    
  </ul>


      </li>
    
      <li class="has_submenu">
        <a href="partV.html">性能管理</a>
        
  <ul>
    
      <li class="">
        <a href="perf_intro.html">管理性能</a>
        

      </li>
    
      <li class="">
        <a href="perf_issues.html">性能问题的常见原因</a>
        

      </li>
    
      <li class="">
        <a href="wlmgmt_intro.html">inHybrid数据库内存总览</a>
        

      </li>
    
      <li class="has_submenu">
        <a href="wlmgmt.html">管理资源</a>
        
  <ul>
    
      <li class="">
        <a href="workload_mgmt_resgroups.html">用资源组进行工作负载管理</a>
        

      </li>
    
      <li class="">
        <a href="workload_mgmt.html">使用资源队列</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="">
        <a href="perf_troubleshoot.html">检修性能问题</a>
        

      </li>
    
  </ul>


      </li>
    
  </ul>


      </li>
    
  </ul>


  </div>
</div>

      <!--googleon: index-->

      <main class="content content-layout" id="js-content" role="main">
        <a id="top"></a>
        
          <h1 class="title-container" style="display: none;">
    使用Kerberos认证
  </h1>

          <div id="js-quick-links" >
            
          </div>
        <div class="to-top" id="js-to-top">
          <a href="kerberos.html#top" title="back to top"></a>
        </div>
        

  <h1 class="title topictitle1">使用Kerberos认证</h1>

  
  <div class="body">
<p class="shortdesc">您可以使用Kerberos认证服务器控制对inHybrid数据库的访问。</p>

    <p class="p">inHybrid数据库支持使用Kerberos认证的通用安全服务应用程序接口（GSSAPI）。
      GSSAPI为支持它的系统提供了自动身份认证（单点登录）功能。
      可以在inHybrid数据库配置文件<span class="ph filepath">pg_hba.conf</span>中指定需要Kerberos身份认证的inHybrid数据库用户或角色。
      当角色尝试登录inHybrid数据库时，如果Kerberos身份认证不可用，则登录失败。
    </p>

    <p class="p">Kerberos提供一种安全的、加密的认证服务。
      它不加密客户端和数据库之间传输的数据，不提供授权服务。
      如果要网络传输的数据，可以使用SSL连接。
      如果要管理inHybrid数据库及对象的访问权限，可以在<span class="ph filepath">pg_hba.conf</span>文件中进行设置，为数据库中的inHybrid数据库用户和角色的授权。
      更多有关Kerberos的信息，可以参考<a class="xref" href="roles_privs.html#topic1" title="inHybrid数据库授权机制存储访问数据库中数据库对象的角色和权限， 并使用SQL语句或命令行实用程序进行管理。">管理角色与权限</a>.</p>

    <p class="p">For more information about Kerberos, see <a class="xref" href="http://web.mit.edu/kerberos/">http://web.mit.edu/kerberos/</a>。</p>

    <div class="section" id="topic1__kerberos_prereq">
<h2 class="title sectiontitle">先决条件</h2>
      
      <p class="p">在为inHybrid数据库配置Kerberos身份认证之前，请确保</p>

      <ul class="ul" id="topic1__ul_ojr_rvj_2p">
        <li class="li" id="topic1__nr157373">
          您可以识别用于Kerberos身份认证的KDC服务器和用于inHybrid数据库系统的Kerberos域。
          <ul class="ul" id="topic1__ul_cn2_nfc_c2b">
            <li class="li">如果您计划使用MIT Kerberos的KDC服务器但尚未配置它，参阅<a class="xref" href="kerberos.html#task_setup_kdc" title="在Red Hat Enterprise Linux上，为inHybrid设置Kerberos密钥分发中心（KDC）服务器的步骤。">安装和配置Kerberos KDC服务器</a>的示例说明</li>

            <li class="li">如果您使用现有的Active Directory KDC服务器，须确保具有：<ul class="ul" id="topic1__ul_oq5_tfc_c2b">
                <li class="li">在AD KDC服务器上安装所有Active Directory服务角色。</li>

                <li class="li">启用LDAP服务。</li>

              </ul>
</li>

          </ul>
</li>

        <li class="li">系统时间在Kerberos密钥分发中心（KDC）服务器和inHybrid数据库主服务器之间是同步的。
          例如，在两台服务器上安装NTP<samp class="ph codeph">ntp</samp>软件包。</li>

        <li class="li" id="topic1__nr163891">在KDC服务器和inHybrid数据库master主机之间存在网络连接。</li>

        <li class="li" id="topic1__nr166917">所有inHybrid数据库主机上都安装了Java 1.7.0_17或更高版本。
        在Red Hat Enterprise Linux 6.x或7.x上使用要使用Kerberos认证的JDBC，需要安装Java 1.7.0_17或更高版本。</li>

       </ul>

    </div>

    <div class="section" id="topic1__nr166539">
<h2 class="title sectiontitle">步骤</h2>
      
      <p class="p">以下是完成为inHybrid数据库设置Kerberos身份认证的任务步骤。</p>

      <ul class="ul">
        <li class="li"><a class="xref" href="kerberos.html#task_m43_vwl_2p">在KDC数据库中创建inHybrid数据库的主体（Principal）</a></li>

        <li class="li"><a class="xref" href="kerberos.html#topic6">在master主机安装Kerberos客户端</a></li>

        <li class="li" id="topic1__nr165111"><a class="xref" href="kerberos.html#topic7">使用Kerberos身份认证配置inHybrid数据库</a></li>

        <li class="li"><a class="xref" href="kerberos.html#topic_kmr_gws_d2b">将Kerberos主体映射为inHybrid数据库角色</a></li>

        <li class="li"><a class="xref" href="kerberos.html#topic9" title="使用JDBC访问启用Kerberos证的inHybrid数据库。">为inHybrid数据库配置JDBC的Kerberos身份认证</a></li>

        <li class="li"><a class="xref" href="kerberos-win-client.html#topic_vjg_d5m_sv">在Windows上为inHybrid数据库客户端配置Kerberos</a></li>

        <li class="li"><a class="xref" href="kerberos-win-client.html#topic_uzb_t5m_sv">使用活动目录配置客户端身份认证</a></li>

      </ul>

    </div>

  </div>

  <div class="related-links">
<div class="familylinks">
<div class="parentlink">
<strong>Parent topic:</strong> <a class="link" href="client_auth.html" title="本主题讲解如何为inHybrid数据库配置客户端访问和身份验证。">配置客户端认证</a>
</div>
</div>
</div>
<div class="topic nested1" id="task_m43_vwl_2p">
    <h2 class="title topictitle2">在KDC数据库中创建inHybrid数据库的主体（Principal）</h2>

    <div class="body">
      <p class="p">
      创建服务主体，为inHybrid数据库服务和Kerberos管理主体，用于以hdbadmin用户身份管理KDC数据库。
      </p>

      <ol class="ol" id="task_m43_vwl_2p__steps_gq5_hzl_2p">
        <li class="li">以root用户身份登录Kerberos KDC服务器。
          <pre class="pre codeblock">$ ssh root@&lt;kdc-server&gt;</pre>
</li>

        <li class="li">为inHybrid数据库服务创建一个主体。
            <pre class="pre codeblock"># kadmin.local -q "addprinc -randkey postgres/mdw@GPDB.KRB"</pre>

            <p class="p">
              <samp class="ph codeph">-randkey</samp>选项可防止命令提示输入密码。</p>

            <p class="p">
              主体名称中<samp class="ph codeph">postgres</samp>部分，匹配inHybrid数据库<samp class="ph codeph">krb_srvname</samp>配置参数的值，默认情况值为<samp class="ph codeph">postgres</samp>即可。
            </p>

            <p class="p">主体名称中主机名部分（译者注，示例中的mdw部分），必须匹配inHybrid数据库master主机上<samp class="ph codeph">hostname</samp>命令的输出结果。
            如果<samp class="ph codeph">hostname</samp>命令显示的是完全限定域名（FQDN），例如显示mdw.example.com，应用到主体名称则为<samp class="ph codeph">postgres/mdw.example.com@GPDB.KRB</samp>。
            </p>

            <p class="p">主体名称中<samp class="ph codeph">GPDB.KRB</samp>部分，是Kerberos域（realm）的名称</p>
</li>

        <li class="li">为hdbadmin/admin角色创建一个主体。
            <pre class="pre codeblock"># kadmin.local -q "addprinc hdbadmin/admin@GPDB.KRB"</pre>

            <div class="p">
            此主体允许您以hdbadmin身份登录时，管理KDC数据库。确保Kerberos的<samp class="ph codeph">kadm.acl</samp>配置文件包含用于向此主体授予权限的ACL。例如，此ACL为GPDB.KRB域中所有管理员用户，授予所有权限。
            <pre class="pre codeblock">*/admin@GPDB.KRB *</pre>
</div>

        </li>

        
        <li class="li">
          使用<samp class="ph codeph">kadmin.local</samp>创建密钥表（keytab）文件。以下示例在当前目录中创建密钥表文件<samp class="ph codeph">gpdb-kerberos.keytab</samp>，并包含inHybrid数据库服务主体和hdbadmin/dmin主体的身份认证信息。
          <pre class="pre codeblock"># kadmin.local -q "ktadd -k gpdb-kerberos.keytab postgres/mdw@GPDB.KRB gadmin/admin@GPDB.KRB"</pre>
</li>

        <li class="li">将密钥表文件复制到master主机。
          <pre class="pre codeblock"># scp gpdb-kerberos.keytab hdbadmin@mdw:~</pre>
</li>

      </ol>

    </div>

  </div>

  <div class="topic nested1" id="topic6">
    <h2 class="title topictitle2">在master主机安装Kerberos客户端</h2>

    <div class="body">
      <p class="p">在inHybrid数据库master服务器上安装Kerberos客户端实用程序和依赖库。</p>

      <ol class="ol" id="topic6__steps_ikn_z1l_d2b">
        <li class="li" id="topic6__nr162024">
            在inHybrid数据库master服务器上安装Kerberos软件包。
            <pre class="pre codeblock">$ sudo yum install krb5-libs krb5-workstation</pre>

        </li>

        <li class="li" id="topic6__nr162025">从KDC服务器拷贝<samp class="ph codeph">/etc/krb5.conf</samp>文件到inHybridm数据库aster主机相同目录下。</li>

      </ol>

    </div>

  </div>

  <div class="topic nested1" xml:lang="en" lang="en" id="topic7">
    <h2 class="title topictitle2">使用Kerberos身份认证配置inHybrid数据库</h2>

    <div class="body">
      <p class="p">使用Kerberos配置inHybrid数据库。</p>

      <ol class="ol" id="topic7__steps_mhd_l3w_c2b">
        <li class="li">以hdbadmin用户身份登录inHybrid数据库master主机。
            <pre class="pre codeblock">$ ssh hdbadmin@&lt;master&gt;
$ source /usr/local/greenplum-db/greenplum_path.sh</pre>
          
        </li>

        <li class="li">设置从KDC服务器复制的密钥表文件的所有者和权限。
            <pre class="pre codeblock">$ chown hdbadmin:hdbadmin /home/hdbadmin/gpdb-kerberos.keytab
$ chmod 400 /home/hdbadmin/gpdb-kerberos.keytab</pre>
         
        </li>

        <li class="li" id="topic7__nr157586">
          通过设置inHybrid数据库<samp class="ph codeph">krb_server_keyfile</samp>服务器配置参数，配置密钥表文件的位置。
          该hdbconfig命令指定将<span class="ph filepath">/home/hdbadmin</span>文件夹为为密钥表文件<span class="ph filepath">gpdb-kerberos.keytab</span>的位置。
            <pre class="pre codeblock">$ hdbconfig -c krb_server_keyfile -v  '/home/hdbadmin/gpdb-kerberos.keytab'</pre>

        </li>

        <li class="li" id="topic7__nr157589">
            修改inHybrid数据库的<samp class="ph codeph">pg_hba.conf</samp>文件，启用Kerberos支持。例如，添加以下行到<samp class="ph codeph">pg_hba.conf</samp>文件，为来自同一网络上的所有用户和主机的连接请求添加GSSAPI和Kerberos身份认证支持。
            <pre class="pre codeblock">host all all 0.0.0.0/0 gss include_realm=0 krb_realm=GPDB.KRB</pre>

          <p class="p">
              设置<samp class="ph codeph">krb_realm</samp>选项为某个域名称，确保只有该域下的用户才能使用Kerberos成功进行身份认证。
              设置<samp class="ph codeph">include_realm</samp>选项为<samp class="ph codeph">0</samp>为身份认证通过的用户名去除域部分。关于<samp class="ph codeph">pg_hba.conf</samp>文件更多信息，参阅PostgreSQL文档中的<a class="xref" href="https://www.postgresql.org/docs/9.4/auth-pg-hba-conf.html" target="_blank">关于pg_hba.conf文件</a>内容。</p>

        </li>

        <li class="li">更新<samp class="ph codeph">krb_server_keyfile</samp>和<samp class="ph codeph">pg_hba.conf</samp>后，重启inHybrid数据库。
            <pre class="pre codeblock">$ hdbstop -ar</pre>
         
        </li>

        <li class="li">创建inHybrid数据库超级用户角色hdbadmin/admin。
            <pre class="pre codeblock">$ createuser hdbadmin/admin
Shall the new role be a superuser? (y/n) y</pre>
         
          <p class="p">此数据库角色的Kerberos密钥文件可以从KDC服务器复制。</p>

        </li>

        <li class="li" id="topic7__nr166157">使用<samp class="ph codeph">kinit</samp>创建票据，使用<samp class="ph codeph">klist</samp>显示Kerberos票证缓存中所有票据。
            <pre class="pre codeblock">$ LD_LIBRARY_PATH= kinit -k -t /home/hdbadmin/gpdb-kerberos.keytab hdbadmin/admin@GPDB.KRB
$ LD_LIBRARY_PATH= klist
Ticket cache: FILE:/tmp/krb5cc_1000
Default principal: hdbadmin/admin@GPDB.KRB

Valid starting       Expires              Service principal
06/13/2018 17:37:35  06/14/2018 17:37:35  krbtgt/GPDB.KRB@GPDB.KRB</pre>

， LD_LIBRARY_PATH 环境变量设置为包含inHybrid数据库 LIB目录，包括Kerberos库。这可能会导致Kerberos实用程序命令，如使用kinit 和 klist的由于版本冲突而失败。解决方案是在您获取Kerberos实用程序之前运行Kerberos实用程序 greenplum-db_path.sh 文件或暂时取消设置 LD_LIBRARY_PATH 执行Kerberos实用程序时的变量，如示例中所示。
            <div class="note note">
<span class="notetitle">Note:</span> 通过加载greenplum-db_path.sh脚本来设置inHybrid数据库环境时，
            环境变量<samp class="ph codeph">LD_LIBRARY_PATH</samp>
            被设置为包含inHybrid数据库的<samp class="ph codeph">lib</samp>目录，
            目录中包含Kerberos库文件。
            可能会导致Kerberos工具命令，如<samp class="ph codeph">kinit</samp>何<samp class="ph codeph">klist</samp>因为版本冲突而执行失败。
            解决方案是在加载greenplum-db_path.sh脚本之前运行Kerberos工具程序，或暂时取消设置<samp class="ph codeph">LD_LIBRARY_PATH</samp>变量再执行如上Kerberos工具程序。</div>
         
        </li>

        <li class="li" id="topic7__nr166158">
            作为测试，使用<samp class="ph codeph">hdbadmin/admin</samp>角色登录postgres数据库：
            <pre class="pre codeblock">$ psql -U "hdbadmin/admin" -h mdw postgres
psql (9.4.20)
Type "help" for help.

postgres=# select current_user;
 current_user
---------------
 hdbadmin/admin
(1 row)</pre>

          <div class="note note">
<span class="notetitle">Note:</span> 当您在master主机启动<samp class="ph codeph">psql</samp>时，必须包含<samp class="ph codeph">-h &lt;master-hostname&gt;</samp>选项，
          强制使用TCP连接，因为使用本地连接时Kerberos认证不生效。</div>

        </li>

      </ol>

      <div class="p">如果Kerberos主体不是inHybrid数据库用户，
        用户尝试登录数据库时，则会显示类似的以下内容的消息显示在的<samp class="ph codeph">psql</samp>命令行：
        <pre class="pre codeblock">psql: krb5_sendauth: Bad response</pre>
</div>

      <p class="p">必须将主体添加为inHybrid数据库用户。</p>

    </div>

  </div>

  <div class="topic nested1" id="topic_kmr_gws_d2b">
    <h2 class="title topictitle2">将Kerberos主体映射为inHybrid数据库角色</h2>

    <div class="body">
		<p class="p">要连接到启用了Kerberos身份认证的inHybrid数据库系统，用户首先使用<samp class="ph codeph">kinit</samp>命令从KDC服务器请求授予票证，期间需要输入密码或者提供密钥表文件。
    随后当用户连接到启用Kerberos的inHybrid数据库系统时，用户的Kerberos主题名称将是inHybrid数据库角色名称。
    具体名称根据inHybrid数据库<samp class="ph codeph">pg_hba.conf</samp>中受到在<samp class="ph codeph">gss</samp>选项进行转换：</p>

      <ul class="ul" id="topic_kmr_gws_d2b__ul_hzh_rjw_22b">
        <li class="li">如果<samp class="ph codeph">krb_realm=&lt;realm&gt;</samp>选项存在，
          inHybrid数据库只接收指定域名下的Kerberos主体。</li>

        <li class="li">如果<samp class="ph codeph">include_realm=0</samp>选项存在，the
          inHybrid数据库角色名是Kerberos主体名去除Kerberos域后部分。
          如果<samp class="ph codeph">include_realm=1</samp>选项被指定，Kerberos域不会从inHybrid数据库角色名中被剔除。
          角色名必须使用inHybrid数据库的<samp class="ph codeph">CREATE ROLE</samp>命令创建。</li>

        <li class="li">如果<samp class="ph codeph">map=&lt;map-name&gt;</samp>选项被指定，将Kerberos主体名称与<samp class="ph codeph">$MASTER_DATA_DIRECTORY/pg_ident.conf</samp>中指定的<samp class="ph codeph">&lt;map-name&gt;</samp>标记匹配，根据第一个匹配项替换为inHybrid数据库角色名。</li>

      </ul>

      <p class="p">
          用户名称映射被定义在<samp class="ph codeph">$MASTER_DATA_DIRECTORY/pg_ident.conf</samp>配置文件。
          此示例定义了一个名为的映射MyMap中有两个条目。
          本例中使用两条<samp class="ph codeph">mymap</samp>记录，定义了两个名称映射。</p>

      <div class="p">
        <pre class="pre codeblock">
# MAPNAME SYSTEM-USERNAME GP-USERNAME
mymap       /^admin@GPDB.KRB$      hdbadmin
mymap /^(.*)_gp)@GPDB.KRB$\1</pre>

      </div>

      <p class="p">名称映射被指定在<samp class="ph codeph">pg_hba.conf</samp>文件的Kerberos记录的可选项中</p>

      <div class="p">
        <pre class="pre codeblock">host all all 0.0.0.0/0 gss include_realm=0 krb_realm=GPDB.KRB map=mymap</pre>

      </div>

      <p class="p">第一个映射条目匹配Kerberos主体admin@GPDB.KRB，并替换为inHybrid数据库的hdbadmin角色名。
        第二个条目使用通配符匹配GPDB.KRB域下名称是<samp class="ph codeph">_gp</samp>结尾的的Kerberos主体，
        并替换为Kerberos主体名称的开始部分（译者注：_gp前面的部分）。
        inHybrid数据库使用<samp class="ph codeph">pg_ident.conf</samp>文件中第一个匹配的映射条目，因此条目的顺序很重要。
        </p>

      <p class="p">
        有关使用用户名映射的更多信息，请参阅PostgreSQL的文档的<a class="xref" href="https://www.postgresql.org/docs/9.4/auth-username-maps.html" target="_blank">用户名映射</a>。</p>

    </div>

  </div>

  <div class="topic nested1" xml:lang="en" lang="en" id="topic9">
    <h2 class="title topictitle2">为inHybrid数据库配置JDBC的Kerberos身份认证</h2>

    
    <div class="body">
<p class="shortdesc">使用JDBC访问启用Kerberos证的inHybrid数据库。</p>

      <p class="p">您可以配置inHybrid数据库使用Kerberos运行用户定义的Java函数。</p>

      <ol class="ol" id="topic9__steps_tj3_q3w_c2b">
        <li class="li">
          <p class="p" id="topic9__nr161502">确保在inHybrid数据库主机中，已经安装并配置了Kerberos。参阅<a class="xref" href="kerberos.html#topic6">在master主机安装Kerberos客户端</a>。</p>

        </li>

        <li class="li">
          <p class="p" id="topic9__nr161503">在<samp class="ph codeph">/home/hdbadmin</samp>文件夹下
            创建<span class="ph filepath">.java.login.config</span>文件，
            并在文件中添加如下内容：</p>

            <pre class="pre codeblock">pgjdbc {
com.sun.security.auth.module.Krb5LoginModule required
doNotPrompt=true
useTicketCache=true
debug=true
client=true;
};</pre>
         
        </li>

        <li class="li" id="topic9__nr157728">
          <p class="p">创建一个Java应用，使用Kerberos认证连接到inHybrid数据库。
          如下示例中数据库连接URL使用PostgreSQL的JDBC驱动，并指定了用于Kerberos认证的参数：
          </p>

            <pre class="pre codeblock">jdbc:postgresql://mdw:5432/mytest?kerberosServerName=postgres
&amp;jaasApplicationName=pgjdbc&amp;user=hdbadmin/gpdb-kdc</pre>
        
          <p class="p">指定的参数名和参数值取决于Java应用如何执行Kerberos认证。</p>

        </li>

        <li class="li" id="topic9__nr157717">
          <p class="p">运行Java应用示例，测试使用Kerberos登录inHybrid数据库。</p>

        </li>

      </ol>

    </div>

  </div>

  <div class="topic nested1" id="task_setup_kdc">
    <h2 class="title topictitle2">安装和配置Kerberos KDC服务器</h2>

    
    <div class="body">
<p class="shortdesc">在Red Hat Enterprise Linux上，为inHybrid设置Kerberos密钥分发中心（KDC）服务器的步骤。</p>

      <p class="p">如果您没有KDC，参考如下步骤，在Red Hat Enterprise Linux主机上安装配置一个KDC服务，其域为<samp class="ph codeph">GPDB.KRB</samp>。
        本示例中KDC服务器的主机名是gpdb-kdc。</p>

      <ol class="ol" id="task_setup_kdc__steps_r5w_rtc_2p">
        <li class="li">安装Kerberos服务器客户端软件包：
        <pre class="pre codeblock">$ sudo yum install krb5-libs krb5-server krb5-workstation</pre>
</li>

        <li class="li">编辑<span class="ph filepath">/etc/krb5.conf</span>配置文件。如下示例展示的包含默认<samp class="ph codeph">GPDB.KRB</samp>域配置的Kerberos服务。
            <pre class="pre codeblock">[logging]
default = FILE:/var/log/krb5libs.log
kdc = FILE:/var/log/krb5kdc.log
admin_server = FILE:/var/log/kadmind.log

[libdefaults]
default_realm = GPDB.KRB
dns_lookup_realm = false
dns_lookup_kdc = false
ticket_lifetime = 24h
renew_lifetime = 7d
forwardable = true
default_tgs_enctypes = aes128-cts des3-hmac-sha1 des-cbc-crc des-cbc-md5
default_tkt_enctypes = aes128-cts des3-hmac-sha1 des-cbc-crc des-cbc-md5
permitted_enctypes = aes128-cts des3-hmac-sha1 des-cbc-crc des-cbc-md5

[realms]
GPDB.KRB = {
kdc = gpdb-kdc:88
admin_server = gpdb-kdc:749
default_domain = gpdb.krb
}

[domain_realm]
.gpdb.krb = GPDB.KRB
gpdb.krb = GPDB.KRB

[appdefaults]
pam = {
debug = false
ticket_lifetime = 36000
renew_lifetime = 36000
forwardable = true
krb4_convert = false
}
</pre>

          <p class="p">
            在<samp class="ph codeph">[realms]</samp>分布，<samp class="ph codeph">kdc</samp>和<samp class="ph codeph">admin_server</samp>键指定了Kerberos服务运行的域名（<samp class="ph codeph">gpdb-kdc</samp>）和端口。可以用IP地址来代替主机名。</p>

          <p class="p">
            如果该Kerberos服务器还管理者其他域的认证，
              需要在<samp class="ph codeph">kdc.conf</samp>文件<samp class="ph codeph">[realms]</samp>和<samp class="ph codeph">[domain_realm]</samp>
              部分添加<samp class="ph codeph">GPDB.KRB</samp>域配置。关于<samp class="ph codeph">kdc.conf</samp>文件更多信息，参阅<a class="xref" href="http://web.mit.edu/kerberos/krb5-latest/doc/" target="_blank">Kerberos文档</a>。</p>

        </li>

        <li class="li">运行<samp class="ph codeph">kdb5_util</samp>，创建Kerberos数据库。
            <pre class="pre codeblock"># kdb5_util create -s</pre>

            <p class="p">
            其<samp class="ph codeph">kdb5_util</samp>的
            <span class="keyword option">create</span>子命令创建数据库，为KDC服务器所管理的Kerberos域存储密钥。
            其<span class="keyword option">-s</span>选项创建一个隐藏文件。如果没有这个隐藏文件，每次启动KDC服务时都需要输入密码</p>
</li>

        <li class="li">使用<samp class="ph codeph">kadmin.local</samp>工具增加一个管理员用户到KDC数据库中。
          因为工具本身并不依赖于Kerberos认证，<samp class="ph codeph">kadmin.local</samp>工具
          允许您为本地的Kerberos服务器增加一个初始的管理员用户。
          运行如下命令，添加用户<samp class="ph codeph">hdbadmin</samp>作为管理员用户到KDC数据库中：
          <pre class="pre codeblock"># kadmin.local -q "addprinc hdbadmin/admin"</pre>

          <p class="p">大部分用户不需要对Kerberos服务器的管理访问。
            他们可以使用<samp class="ph codeph">kadmin</samp>来管理自己的主体（例如，更改自己的密码）。
            关于<samp class="ph codeph">kadmin</samp>的信息，参阅<a class="xref" href="http://web.mit.edu/kerberos/krb5-latest/doc/" target="_blank">Kerberos文档</a>。</p>
</li>

        <li class="li">如果需要，编辑
            <span class="ph filepath">/var/kerberos/krb5kdc/kadm5.acl</span>文件，
            为<samp class="ph codeph">hdbadmin</samp>授予适当的权限。</li>

        <li class="li">启动Kerberos守护进程：
        <pre class="pre codeblock"># /sbin/service krb5kdc start#
/sbin/service kadmin start</pre>
</li>

        <li class="li">设置Kerberos自启动：
        <pre class="pre codeblock"># /sbin/chkconfig krb5kdc on
# /sbin/chkconfig kadmin on</pre>
</li>

      </ol>

    </div>

  </div>



        

      </main>
    </div>
  </div>
</div>

<div id="scrim"></div>

<div class="container">
  <footer class="site-footer-links">
    
  </footer>
</div><!--end of container-->

</body>
</html>
