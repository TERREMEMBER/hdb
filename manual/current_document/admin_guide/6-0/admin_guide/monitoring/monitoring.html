<!doctype html>
<html>
<head>
  <meta charset="gbk">
  <!-- Always force latest IE rendering engine or request Chrome Frame -->
  <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">

  
  <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,300italic,400italic,400,600' rel='stylesheet' type='text/css'>
  <!-- Use title if it's in the page YAML frontmatter -->
  <title>
      建议的监视和维护措施 |
    inHybrid Database Docs
  </title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="../../../stylesheets/all.css" rel="stylesheet" media="screen, print" />
  <link href="../../../stylesheets/print.css" rel="stylesheet" media="print" />
  <link href='../../../images/favicon.ico' rel='shortcut icon'>

  <script src="../../../javascripts/all.js"></script>
  
</head>

<body class="x6-0 x6-0_admin_guide x6-0_admin_guide_monitoring x6-0_admin_guide_monitoring_monitoring has-subnav">

<div class="viewport">
  <div class='wrap'>
    <script type="text/javascript">
    </script>

     
  <header class="header header-layout">
    <h1 class="logo">
      <a href="http://47.92.231.67:8080/">inHybrid Database Documentation</a>
    </h1>
    
    <div class="header-links js-bar-links">
      <div class="btn-menu" data-behavior="MenuMobile"></div>
      <div class="header-item"><a href="https://greenplum.org">Back to inHybrid Database</a></div>
      <div class="header-item">
        <a href="https://github.com/greenplum-db/gpdb/wiki">Wiki</a>
      </div>
      
    </div>
  </header>


    <div class="container">

      <!--googleoff: index-->
      <div id="sub-nav" class="nav-container js-sidenav" role="navigation" >
  <a class="sidenav-title" data-behavior="SubMenuMobile">
    Doc Index
  </a>
  <div class="nav-content">
    
  <ul>
    
      <li class="">
        <a href="../../homenav.html">inHybrid数据库 6.0文档</a>
        

      </li>
    
      <li class="has_submenu">
        <a href="../admin_guide.html">管理员指南</a>
        
  <ul>
    
      <li class="has_submenu">
        <a href="../intro/partI.html">inHybrid数据库概念</a>
        
  <ul>
    
      <li class="">
        <a href="../intro/arch_overview.html">关于inHybrid的架构</a>
        

      </li>
    
      <li class="">
        <a href="../intro/about_utilities.html">关于管理和监控工具</a>
        

      </li>
    
      <li class="has_submenu">
        <a href="../intro/about_mvcc.html">关于inHybrid数据库中的并发控制</a>
        
  <ul>
    
      <li class="">
        <a href="../intro/mvcc_example.html">管理事务ID的例子</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="">
        <a href="../intro/about_loading.html">关于并行数据装载</a>
        

      </li>
    
      <li class="">
        <a href="../intro/about_ha.html">关于inHybrid数据库中的冗余和故障切换</a>
        

      </li>
    
      <li class="">
        <a href="../intro/about_statistics.html">关于inHybrid数据库中的数据库统计信息</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="has_submenu">
        <a href="../managing/partII.html">管理一个inHybrid系统</a>
        
  <ul>
    
      <li class="">
        <a href="../managing/versioning.html">关于inHybrid数据库发布版本号</a>
        

      </li>
    
      <li class="">
        <a href="../managing/startstop.html">启动和停止inHybrid数据库</a>
        

      </li>
    
      <li class="has_submenu">
        <a href="../access_db/topics/g-accessing-the-database.html">访问数据库</a>
        
  <ul>
    
      <li class="">
        <a href="../access_db/topics/g-establishing-a-database-session.html">建立一个数据库会话</a>
        

      </li>
    
      <li class="">
        <a href="../access_db/topics/g-supported-client-applications.html">支持的客户端应用</a>
        

      </li>
    
      <li class="">
        <a href="../access_db/topics/g-greenplum-database-client-applications.html">inHybrid数据库客户端应用</a>
        

      </li>
    
      <li class="">
        <a href="../access_db/topics/g-connecting-with-psql.html">用psql连接</a>
        

      </li>
    
      <li class="">
        <a href="../access_db/topics/pgbouncer.html">使用PgBouncer连接池</a>
        

      </li>
    
      <li class="">
        <a href="../access_db/topics/g-database-application-interfaces.html">数据库应用接口</a>
        

      </li>
    
      <li class="">
        <a href="../access_db/topics/g-troubleshooting-connection-problems.html">连接问题的发现及解决</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="has_submenu">
        <a href="../topics/g-configuring-the-greenplum-system.html">配置inHybrid数据库系统</a>
        
  <ul>
    
      <li class="">
        <a href="../topics/g-about-greenplum-master-and-local-parameters.html">关于inHybrid数据库的Master参数和本地参数</a>
        

      </li>
    
      <li class="has_submenu">
        <a href="../topics/g-setting-configuration-parameters.html">设置配置参数</a>
        
  <ul>
    
      <li class="">
        <a href="../topics/g-setting-a-local-configuration-parameter.html">设置本地配置参数</a>
        

      </li>
    
      <li class="has_submenu">
        <a href="../topics/g-setting-a-master-configuration-parameter.html">设置Master配置参数</a>
        
  <ul>
    
      <li class="">
        <a href="../topics/g-setting-parameters-at-the-system-level.html">设置系统级别参数</a>
        

      </li>
    
      <li class="">
        <a href="../topics/g-setting-parameters-at-the-database-level.html">设置数据库级别参数</a>
        

      </li>
    
      <li class="">
        <a href="../topics/g-setting-parameters-at-the-role-level.html">设置角色级别参数</a>
        

      </li>
    
      <li class="">
        <a href="../topics/g-setting-parameters-in-a-session.html">设置会话级别参数</a>
        

      </li>
    
  </ul>


      </li>
    
  </ul>


      </li>
    
      <li class="">
        <a href="../topics/g-viewing-server-configuration-parameter-settings.html">查看服务器配置参数设置</a>
        

      </li>
    
      <li class="">
        <a href="../topics/g-configuration-parameter-categories.html">配置参数种类</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="">
        <a href="../managing/compression.html">启用压缩</a>
        

      </li>
    
      <li class="has_submenu">
        <a href="../highavail/topics/g-enabling-high-availability-features.html">启用高可用和数据持久化特征</a>
        
  <ul>
    
      <li class="has_submenu">
        <a href="../highavail/topics/g-overview-of-high-availability-in-greenplum-database.html">inHybrid数据库高可用性概述</a>
        
  <ul>
    
      <li class="">
        <a href="../highavail/topics/g-overview-of-segment-mirroring.html">Segment镜像概述</a>
        

      </li>
    
      <li class="">
        <a href="../highavail/topics/g-overview-of-master-mirroring.html">Master镜像概述</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="has_submenu">
        <a href="../highavail/topics/g-enabling-mirroring-in-greenplum-database.html">在inHybrid数据库中启用镜像</a>
        
  <ul>
    
      <li class="">
        <a href="../highavail/topics/g-enabling-segment-mirroring.html">启用Segment镜像</a>
        

      </li>
    
      <li class="">
        <a href="../highavail/topics/g-enabling-master-mirroring.html">启用Master镜像</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="has_submenu">
        <a href="../highavail/topics/g-detecting-a-failed-segment.html">检测故障的Segment</a>
        
  <ul>
    
      <li class="">
        <a href="../highavail/topics/g-checking-for-failed-segments.html">检测故障Segment</a>
        

      </li>
    
      <li class="">
        <a href="../highavail/topics/g-checking-the-log-files.html">检查日志文件</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="has_submenu">
        <a href="../highavail/topics/g-recovering-a-failed-segment.html">恢复故障Segment</a>
        
  <ul>
    
      <li class="has_submenu">
        <a href="../highavail/topics/g-recovering-from-segment-failures.html">从Segment故障中恢复</a>
        
  <ul>
    
      <li class="">
        <a href="../highavail/topics/g-when-a-segment-host-is-not-recoverable.html">当一台Segment主机不可恢复时</a>
        

      </li>
    
  </ul>


      </li>
    
  </ul>


      </li>
    
      <li class="has_submenu">
        <a href="../highavail/topics/g-recovering-a-failed-master.html">恢复故障的Master</a>
        
  <ul>
    
      <li class="">
        <a href="../highavail/topics/g-restoring-master-mirroring-after-a-recovery.html">在恢复后还原Master镜像</a>
        

      </li>
    
  </ul>


      </li>
    
  </ul>


      </li>
    
      <li class="has_submenu">
        <a href="../managing/backup-main.html">备份和恢复数据库</a>
        
  <ul>
    
      <li class="">
        <a href="../managing/backup-overview.html">备份和恢复概述</a>
        

      </li>
    
      <li class="has_submenu">
        <a href="../managing/backup-hdbbackup.html">使用hdbbackup和hdbrestore并行备份</a>
        
  <ul>
    
      <li class="">
        <a href="../managing/backup-hdbbackup.html#topic_vh5_1hd_tbb">需求和限制</a>
        

      </li>
    
      <li class="">
        <a href="../managing/backup-hdbbackup.html#topic_x3s_lqj_tbb">备份或还原中包含的对象</a>
        

      </li>
    
      <li class="">
        <a href="../managing/backup-hdbbackup.html#topic_qgj_b3d_tbb">执行基本备份和还原操作</a>
        

      </li>
    
      <li class="">
        <a href="../managing/backup-hdbbackup.html#topic_et4_b5d_tbb">过滤备份或恢复的内容</a>
        

      </li>
    
      <li class="">
        <a href="../managing/backup-hdbbackup.html#topic_qwd_d5d_tbb">配置邮件通知</a>
        

      </li>
    
      <li class="">
        <a href="../managing/backup-hdbbackup.html#topic_xnj_b4c_tbb">理解备份文件</a>
        

      </li>
    
      <li class="has_submenu">
        <a href="../managing/backup-hdbbackup-incremental.html">使用hdbbackup和hdbrestore创建增量备份</a>
        
  <ul>
    
      <li class="">
        <a href="../managing/backup-hdbbackup-incremental.html#topic_kvf_mkr_t2b">关于增量备份集</a>
        

      </li>
    
      <li class="">
        <a href="../managing/backup-hdbbackup-incremental.html#topic_btr_xfr_t2b">使用增量备份</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="has_submenu">
        <a href="../managing/backup-boostfs.html">将hdbbackup和hdbrestore与BoostFS一起使用</a>
        
  <ul>
    
      <li class="">
        <a href="../managing/backup-boostfs.html#topic_zp4_mvv_bdb">安装BoostFS</a>
        

      </li>
    
      <li class="">
        <a href="../managing/backup-boostfs.html#topic_t4z_tvv_bdb">使用BoostFS备份和恢复</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="has_submenu">
        <a href="../managing/backup-plugins.html">使用hdbbackup存储插件</a>
        
  <ul>
    
      <li class="">
        <a href="../managing/backup-s3-plugin.html">使用带有hdbbackup和hdbrestore的S3存储插件</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="has_submenu">
        <a href="../managing/backup-plugin-api.html">备份&#x2F;恢复存储插件API（Beta版）</a>
        
  <ul>
    
      <li class="">
        <a href="../managing/plugin_api/backup_data.html">backup_data</a>
        

      </li>
    
      <li class="">
        <a href="../managing/plugin_api/backup_file.html">backup_file</a>
        

      </li>
    
      <li class="">
        <a href="../managing/plugin_api/cleanup_plugin_for_backup.html">cleanup_plugin_for_backup</a>
        

      </li>
    
      <li class="">
        <a href="../managing/plugin_api/cleanup_plugin_for_restore.html">cleanup_plugin_for_restore</a>
        

      </li>
    
      <li class="">
        <a href="../managing/plugin_api/plugin_api_version.html">plugin_api_version</a>
        

      </li>
    
      <li class="">
        <a href="../managing/plugin_api/restore_data.html">restore_data</a>
        

      </li>
    
      <li class="">
        <a href="../managing/plugin_api/restore_file.html">restore_file</a>
        

      </li>
    
      <li class="">
        <a href="../managing/plugin_api/setup_plugin_for_backup.html">setup_plugin_for_backup</a>
        

      </li>
    
      <li class="">
        <a href="../managing/plugin_api/setup_plugin_for_restore.html">setup_plugin_for_restore</a>
        

      </li>
    
  </ul>


      </li>
    
  </ul>


      </li>
    
  </ul>


      </li>
    
      <li class="has_submenu">
        <a href="../expand/expand-main.html">扩容inHybrid系统</a>
        
  <ul>
    
      <li class="">
        <a href="../expand/expand-overview.html">系统扩容概述</a>
        

      </li>
    
      <li class="">
        <a href="../expand/expand-planning.html">规划inHybrid系统扩容</a>
        

      </li>
    
      <li class="">
        <a href="../expand/expand-nodes.html">准备并增加节点</a>
        

      </li>
    
      <li class="">
        <a href="../expand/expand-initialize.html">初始化新节点</a>
        

      </li>
    
      <li class="">
        <a href="../expand/expand-redistribute.html">重分布表</a>
        

      </li>
    
      <li class="">
        <a href="../expand/expand-rm-schema.html">移除扩容Schema</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="">
        <a href="../managing/monitor.html">监控inHybrid系统</a>
        

      </li>
    
      <li class="">
        <a href="../managing/maintain.html">日常系统维护任务</a>
        

      </li>
    
      <li class="">
        <a href="monitoring.html">建议的监视和维护措施</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="has_submenu">
        <a href="../partIII.html">管理inHybrid数据库访问</a>
        
  <ul>
    
      <li class="has_submenu">
        <a href="../client_auth.html">配置客户端认证</a>
        
  <ul>
    
      <li class="">
        <a href="../ldap.html">使用带TLS&#x2F;SSL的LDAP认证</a>
        

      </li>
    
      <li class="">
        <a href="../kerberos.html">使用Kerberos认证</a>
        

      </li>
    
      <li class="">
        <a href="../kerberos-lin-client.html">为Linux客户端进行Kerberos配置</a>
        

      </li>
    
      <li class="">
        <a href="../kerberos-win-client.html">为Windows客户端进行Kerberos配置</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="">
        <a href="../roles_privs.html">管理角色与权限</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="has_submenu">
        <a href="../ddl/ddl.html">定义数据库对象</a>
        
  <ul>
    
      <li class="">
        <a href="../ddl/ddl-database.html">创建和管理数据库</a>
        

      </li>
    
      <li class="">
        <a href="../ddl/ddl-tablespace.html">创建和管理表空间</a>
        

      </li>
    
      <li class="">
        <a href="../ddl/ddl-schema.html">创建和管理SCHEMA</a>
        

      </li>
    
      <li class="">
        <a href="../ddl/ddl-table.html">创建和管理表</a>
        

      </li>
    
      <li class="">
        <a href="../ddl/ddl-storage.html">选择表存储模型</a>
        

      </li>
    
      <li class="">
        <a href="../ddl/ddl-partition.html">对大型表分区</a>
        

      </li>
    
      <li class="">
        <a href="../ddl/ddl-sequence.html">创建和使用序列</a>
        

      </li>
    
      <li class="">
        <a href="../ddl/ddl-index.html">在inHybrid数据库中使用索引</a>
        

      </li>
    
      <li class="">
        <a href="../ddl/ddl-view.html">创建和管理视图</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="">
        <a href="../distribution.html">分布与倾斜</a>
        

      </li>
    
      <li class="">
        <a href="../dml.html">插入, 更新, 和删除数据 </a>
        

      </li>
    
      <li class="has_submenu">
        <a href="../query/topics/query.html">查询数据</a>
        
  <ul>
    
      <li class="">
        <a href="../query/topics/parallel-proc.html">关于inHybrid的查询处理</a>
        

      </li>
    
      <li class="has_submenu">
        <a href="../query/topics/query-piv-optimizer.html">关于GPORCA</a>
        
  <ul>
    
      <li class="">
        <a href="../query/topics/query-piv-opt-overview.html">GPORCA概述</a>
        

      </li>
    
      <li class="">
        <a href="../query/topics/query-piv-opt-enable.html">启用和禁用GPORCA</a>
        

      </li>
    
      <li class="">
        <a href="../query/topics/query-piv-opt-root-partition.html">收集根分区统计信息</a>
        

      </li>
    
      <li class="">
        <a href="../query/topics/query-piv-opt-notes.html">使用GPORCA时的考虑</a>
        

      </li>
    
      <li class="">
        <a href="../query/topics/query-piv-opt-features.html">GPORCA特性和增强</a>
        

      </li>
    
      <li class="">
        <a href="../query/topics/query-piv-opt-changed.html">GPORCA改变的行为</a>
        

      </li>
    
      <li class="">
        <a href="../query/topics/query-piv-opt-limitations.html">GPORCA的限制</a>
        

      </li>
    
      <li class="">
        <a href="../query/topics/query-piv-opt-fallback.html">判断被使用的查询优化器</a>
        

      </li>
    
      <li class="">
        <a href="../query/topics/query-piv-uniform-part-tbl.html">关于统一多级分区表</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="">
        <a href="../query/topics/defining-queries.html">定义查询</a>
        

      </li>
    
      <li class="">
        <a href="../query/topics/CTE-query.html">WITH查询（公用表表达式）</a>
        

      </li>
    
      <li class="">
        <a href="../query/topics/functions-operators.html">使用函数和操作符</a>
        

      </li>
    
      <li class="">
        <a href="../query/topics/json-data.html">使用JSON数据</a>
        

      </li>
    
      <li class="">
        <a href="../query/topics/xml-data.html">使用XML数据</a>
        

      </li>
    
      <li class="has_submenu">
        <a href="../textsearch/full-text-search.html">使用全文搜索</a>
        
  <ul>
    
      <li class="">
        <a href="../textsearch/intro.html">关于全文搜索</a>
        

      </li>
    
      <li class="">
        <a href="../textsearch/tables-indexes.html">在数据库表中搜索文本</a>
        

      </li>
    
      <li class="">
        <a href="../textsearch/controlling.html">控制文本搜索</a>
        

      </li>
    
      <li class="">
        <a href="../textsearch/features.html">文本搜索附加功能</a>
        

      </li>
    
      <li class="">
        <a href="../textsearch/parsers.html">文本搜索解析器</a>
        

      </li>
    
      <li class="">
        <a href="../textsearch/dictionaries.html">文本搜索词典</a>
        

      </li>
    
      <li class="">
        <a href="../textsearch/configuration.html">文本搜索配置示例</a>
        

      </li>
    
      <li class="">
        <a href="../textsearch/testing.html">测试和调试文本搜索</a>
        

      </li>
    
      <li class="">
        <a href="../textsearch/gist-gin.html">文本搜索的GiST和GIN索引</a>
        

      </li>
    
      <li class="">
        <a href="../textsearch/psql-support.html">psql支持</a>
        

      </li>
    
      <li class="">
        <a href="../textsearch/limitations.html">限制</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="">
        <a href="../query/topics/query-performance.html">查询性能</a>
        

      </li>
    
      <li class="">
        <a href="../query/topics/spill-files.html">管理查询生成的溢出文件</a>
        

      </li>
    
      <li class="">
        <a href="../query/topics/query-profiling.html">查询分析</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="has_submenu">
        <a href="../external/g-working-with-file-based-ext-tables.html">使用外部数据</a>
        
  <ul>
    
      <li class="has_submenu">
        <a href="../external/g-external-tables.html">定义外部表</a>
        
  <ul>
    
      <li class="">
        <a href="../external/g-file-protocol.html">file:&#x2F;&#x2F;协议</a>
        

      </li>
    
      <li class="">
        <a href="../external/g-hdbfdist-protocol.html">hdbfdist:&#x2F;&#x2F;协议</a>
        

      </li>
    
      <li class="">
        <a href="../external/g-hdbfdists-protocol.html">hdbfdists:&#x2F;&#x2F; 协议</a>
        

      </li>
    
      <li class="">
        <a href="../external/g-pxf-protocol.html">pxf:&#x2F;&#x2F; 协议</a>
        

      </li>
    
      <li class="">
        <a href="../external/g-s3-protocol.html">s3:&#x2F;&#x2F; 协议</a>
        

      </li>
    
      <li class="">
        <a href="../external/g-accessing-ext-files-custom-protocol.html">使用自定义协议</a>
        

      </li>
    
      <li class="">
        <a href="../external/g-handling-errors-ext-table-data.html">处理外部表数据中的错误</a>
        

      </li>
    
      <li class="">
        <a href="../external/g-creating-and-using-web-external-tables.html">创建和使用外部Web表</a>
        

      </li>
    
      <li class="has_submenu">
        <a href="../external/g-creating-external-tables---examples.html">Examples for Creating External Tables</a>
        
  <ul>
    
      <li class="">
        <a href="../external/g-example-1-single-hdbfdist-instance-on-single-nic-machine.html">Example 1―Single hdbfdist instance on single-NIC machine</a>
        

      </li>
    
      <li class="">
        <a href="../external/g-example-2-multiple-hdbfdist-instances.html">Example 2―Multiple hdbfdist instances </a>
        

      </li>
    
      <li class="">
        <a href="../external/g-example-3-multiple-hdbfdists-instances.html">Example 3―Multiple hdbfdists instances </a>
        

      </li>
    
      <li class="">
        <a href="../external/g-example-4-single-hdbfdist-instance-with-error-logging.html">Example 4―Single hdbfdist instance with error logging</a>
        

      </li>
    
      <li class="">
        <a href="../external/g-example-5-text-format-on-a-hadoop-distributed-file-server.html">Example 5―TEXT Format on a Hadoop Distributed File Server</a>
        

      </li>
    
      <li class="">
        <a href="../external/g-example-6-multiple-files-in-csv-format-with-header-rows.html">Example 6―Multiple files in CSV format with header rows</a>
        

      </li>
    
      <li class="">
        <a href="../external/g-example-7-readable-web-external-table-with-script.html">Example 7―Readable External Web Table with Script</a>
        

      </li>
    
      <li class="">
        <a href="../external/g-example-8-writable-external-table-with-hdbfdist.html">Example 8―Writable External Table with hdbfdist</a>
        

      </li>
    
      <li class="">
        <a href="../external/g-example-9-writable-external-web-table-with-script.html">Example 9―Writable External Web Table with Script</a>
        

      </li>
    
      <li class="">
        <a href="../external/g-example-10-readable-and-writable-external-tables-with-xml-transformations.html">Example 10―Readable and Writable External Tables with XML Transformations</a>
        

      </li>
    
  </ul>


      </li>
    
  </ul>


      </li>
    
      <li class="">
        <a href="../external/pxf-overview.html">使用PXF访问外部数据</a>
        

      </li>
    
      <li class="has_submenu">
        <a href="../external/g-foreign.html">使用外部表访问外部数据</a>
        
  <ul>
    
      <li class="">
        <a href="../external/g-devel-fdw.html">写一个外部数据的包装器</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="">
        <a href="../external/g-using-the-greenplum-parallel-file-server--hdbfdist-.html">使用inHybrid的并行文件服务器（hdbfdist）</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="has_submenu">
        <a href="../load/topics/g-loading-and-unloading-data.html">装载和卸载数据</a>
        
  <ul>
    
      <li class="">
        <a href="../load/topics/g-loading-data-using-an-external-table.html">使用外部表装载数据</a>
        

      </li>
    
      <li class="has_submenu">
        <a href="../load/topics/g-loading-and-writing-non-hdfs-custom-data.html">装载和写入非HDFS自定义数据</a>
        
  <ul>
    
      <li class="has_submenu">
        <a href="../load/topics/g-using-a-custom-format.html">使用一种自定义格式</a>
        
  <ul>
    
      <li class="">
        <a href="../load/topics/g-importing-and-exporting-fixed-width-data.html">导入和导出固定宽度的数据</a>
        

      </li>
    
      <li class="">
        <a href="../load/topics/g-examples-read-fixed-width-data.html">例子：读取宽度固定的数据</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="">
        <a href="../load/topics/g-using-a-custom-protocol.html">使用一种自定协议</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="has_submenu">
        <a href="../load/topics/g-handling-load-errors.html">处理装载错误</a>
        
  <ul>
    
      <li class="">
        <a href="../load/topics/g-define-an-external-table-with-single-row-error-isolation.html">定义一个带有单行错误隔离的外部表</a>
        

      </li>
    
      <li class="">
        <a href="../load/topics/g-create-an-error-table-and-declare-a-reject-limit.html">捕捉行格式化错误并且声明拒绝极限 </a>
        

      </li>
    
      <li class="">
        <a href="../load/topics/g-viewing-bad-rows-in-the-error-table-or-error-log.html">在错误日志中查看不正确的行</a>
        

      </li>
    
      <li class="">
        <a href="../load/topics/g-moving-data-between-tables.html">在表之间移动数据</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="">
        <a href="../load/topics/g-loading-data-with-hdbload.html">用hdbload装载数据</a>
        

      </li>
    
      <li class="">
        <a href="../external/pxf-overview.html">使用PXF访问外部数据</a>
        

      </li>
    
      <li class="">
        <a href="../load/topics/transforming-xml-data.html">使用hdbfdist和hdbload转换外部数据</a>
        

      </li>
    
      <li class="">
        <a href="../load/topics/g-loading-data-with-copy.html">用COPY装载数据</a>
        

      </li>
    
      <li class="">
        <a href="../load/topics/g-running-copy-in-single-row-error-isolation-mode.html">在单行错误隔离模式中运行COPY</a>
        

      </li>
    
      <li class="">
        <a href="../load/topics/g-optimizing-data-load-and-query-performance.html">优化数据装载和查询性能</a>
        

      </li>
    
      <li class="has_submenu">
        <a href="../load/topics/g-unloading-data-from-greenplum-database.html">从inHybrid数据库卸载数据</a>
        
  <ul>
    
      <li class="has_submenu">
        <a href="../load/topics/g-defining-a-file-based-writable-external-table.html">定义基于文件的可写外部表</a>
        
  <ul>
    
      <li class="">
        <a href="../load/topics/g-example-1-greenplum-file-server-hdbfdist.html">例 1―inHybrid文件服务器（hdbfdist）</a>
        

      </li>
    
      <li class="">
        <a href="../load/topics/g-example-2-hadoop-file-server.html">例 2―Hadoop文件系统(pxf)</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="has_submenu">
        <a href="../load/topics/g-defining-a-command-based-writable-external-web-table.html">定义基于命令的可写外部Web表</a>
        
  <ul>
    
      <li class="">
        <a href="../load/topics/g-disabling-execute-for-web-or-writable-external-tables.html">为Web或者可写外部表禁用EXECUTE</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="">
        <a href="../load/topics/g-unloading-data-using-a-writable-external-table.html">使用可写外部表卸载数据</a>
        

      </li>
    
      <li class="">
        <a href="../load/topics/g-unloading-data-using-copy.html">使用COPY卸载数据</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="has_submenu">
        <a href="../load/topics/g-formatting-data-files.html">格式化数据文件</a>
        
  <ul>
    
      <li class="">
        <a href="../load/topics/g-formatting-rows.html">格式化行</a>
        

      </li>
    
      <li class="">
        <a href="../load/topics/g-formatting-columns.html">格式化列</a>
        

      </li>
    
      <li class="">
        <a href="../load/topics/g-representing-null-values.html">表示NULL值</a>
        

      </li>
    
      <li class="has_submenu">
        <a href="../load/topics/g-escaping.html">转义</a>
        
  <ul>
    
      <li class="">
        <a href="../load/topics/g-escaping-in-text-formatted-files.html">在文本格式的文件中转义</a>
        

      </li>
    
      <li class="">
        <a href="../load/topics/g-escaping-in-csv-formatted-files.html">在CSV格式的文件中转义</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="">
        <a href="../load/topics/g-character-encoding.html">字符编码</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="has_submenu">
        <a href="../load/topics/g-example-custom-data-access-protocol.html">自定义数据访问协议实例 </a>
        
  <ul>
    
      <li class="has_submenu">
        <a href="../load/topics/g-installing-the-external-table-protocol.html">安装外部表协议</a>
        
  <ul>
    
      <li class="">
        <a href="../load/topics/g-gpextprotocal.c.html">gpextprotocal.c</a>
        

      </li>
    
  </ul>


      </li>
    
  </ul>


      </li>
    
  </ul>


      </li>
    
      <li class="has_submenu">
        <a href="../partV.html">性能管理</a>
        
  <ul>
    
      <li class="">
        <a href="../perf_intro.html">管理性能</a>
        

      </li>
    
      <li class="">
        <a href="../perf_issues.html">性能问题的常见原因</a>
        

      </li>
    
      <li class="">
        <a href="../wlmgmt_intro.html">inHybrid数据库内存总览</a>
        

      </li>
    
      <li class="has_submenu">
        <a href="../wlmgmt.html">管理资源</a>
        
  <ul>
    
      <li class="">
        <a href="../workload_mgmt_resgroups.html">用资源组进行工作负载管理</a>
        

      </li>
    
      <li class="">
        <a href="../workload_mgmt.html">使用资源队列</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="">
        <a href="../perf_troubleshoot.html">检修性能问题</a>
        

      </li>
    
  </ul>


      </li>
    
  </ul>


      </li>
    
  </ul>


  </div>
</div>

      <!--googleon: index-->

      <main class="content content-layout" id="js-content" role="main">
        <a id="top"></a>
        
          <h1 class="title-container" style="display: none;">
    建议的监视和维护措施
  </h1>

          <div id="js-quick-links" >
            
          </div>
        <div class="to-top" id="js-to-top">
          <a href="monitoring.html#top" title="back to top"></a>
        </div>
        

    <div class="nested0" id="topic_kmz_lbg_rp">
        <h1 class="title topictitle1">建议的监视和维护措施</h1>

        
        <div class="body">
<p class="shortdesc">本节列出了为确保inHybrid数据库群集的高可用性和一致性能而建议的监视和维护活动.</p>

            <p class="p">以下各节中的表建议inHybrid系统管理员可以定期执行的活动，以确保系统的所有组件均以最佳状态运行。监视活动可以帮助及早发现和诊断问题。维护措施可以帮助系统保持最新状态并避免性能下降，比如系统表过大或磁盘可用空间减少. </p>

            <p class="p">不必在集群中实施所有这些建议；根据服务的要求、建议执行的频率和级别作为参考标准进行实施. </p>

        </div>

        <div class="related-links">
<div class="familylinks">
<div class="parentlink">
<strong>Parent topic:</strong> <a class="link" href="../managing/partII.html" title="这一节描述了一个inHybrid数据库系统管理员所执行的基本系统管理任务。">管理一个inHybrid系统</a>
</div>
</div>
</div>
<div class="topic nested1" id="drr_5bg_rp">
            <h2 class="title topictitle2">数据库状态监视活动</h2>

            <div class="body">
                
<div class="tablenoborder">
<table cellpadding="4" cellspacing="0" summary="" id="drr_5bg_rp__table_drr_5bg_rp" class="table" frame="border" border="1" rules="all">
<caption><span class="tablecap">表 1. 数据库状态监视活动</span></caption>
                        
                        
                        
                        <thead class="thead" align="left">
                            <tr class="row">
                                <th class="entry" valign="top" id="d75104e58">活动</th>

                                <th class="entry" valign="top" id="d75104e61">执行程序</th>

                                <th class="entry" valign="top" id="d75104e64">维护措施</th>

                            </tr>

                        </thead>

                        <tbody class="tbody">
                            <tr class="row">
                                <td class="entry" valign="top" headers="d75104e58 ">列出当前关闭的segments，如果有结果返回，则应产生警告.<p class="p">Recommended
                                        推荐频率：每5到10分执行钟一次</p>
<p class="p">级别:
                                        IMPORTANT</p>
</td>

                                <td class="entry" valign="top" headers="d75104e61 ">在 <samp class="ph codeph">postgres</samp>
                                   数据库执行以下查询<pre class="pre codeblock">SELECT * FROM gp_segment_configuration
WHERE status &lt;&gt; 'u';</pre>
</td>

                                <td class="entry" valign="top" headers="d75104e64 ">如果该查询有一个或多个结果返回,说明有一个或多个segment停止服务，可以根据以下步骤定位解决问题:<ol class="ol" id="drr_5bg_rp__ol_okh_2cg_rp">
                                        <li class="li">确认有segment关闭的主机是否有响应. </li>

                                        <li class="li">如果主机没有问题, 检查primary和mirrorsegments的pg_log 目录下的文件来排查segment关闭的主要原因. </li>

                                        <li class="li">如果没有明显的错误发现, 执行
                                                <samp class="ph codeph">hdbrecoverseg</samp> 管理命令来启动关闭的segments.</li>

                                    </ol>
</td>

                            </tr>

                            <tr class="row">
                                <td class="entry" valign="top" headers="d75104e58 ">检查segments是否处于 changetracking 状态。如果有结果返回，则应产生警告.<p class="p">推荐频率：每5到10分执行钟一次</p>
<p class="p">级别: IMPORTANT</p>
</td>

                                <td class="entry" valign="top" headers="d75104e61 ">
                                    <div class="p">在 <samp class="ph codeph">postgres</samp>
                                        数据库执行以下查询:<pre class="pre codeblock">SELECT * FROM gp_segment_configuration
WHERE mode = 'c';</pre>
</div>

                                </td>

                                <td class="entry" valign="top" headers="d75104e64 ">
                                    <div class="p">如果该查询有结果返回，可以根据以下步骤定位解决问题：<ol class="ol" id="drr_5bg_rp__ol_ezt_kcg_rp">
                                            <li class="li">确认有segment关闭的主机是否有响应. </li>

                                            <li class="li">如果主机没有问题, 检查primary和mirrorsegments的pg_log 目录下的文件来排查segment关闭的主要原因. </li>

                                            <li class="li">如果没有明显的错误发现, 执行 hdbrecoverseg 管理命令来启动关闭的segments</li>

                                        </ol>
</div>

                                </td>

                            </tr>

                            <tr class="row">
                                <td class="entry" valign="top" headers="d75104e58 ">检查segments是否处于 Resynchronizing 状态。如果有结果返回，则应产生警告<p class="p">推荐频率：每5到10分执行钟一次</p>
<p class="p">级别:
                                        IMPORTANT</p>
</td>

                                <td class="entry" valign="top" headers="d75104e61 ">
                                    <div class="p">在<samp class="ph codeph">postgres</samp>
                                        数据库执行以下查询：<pre class="pre codeblock">SELECT * FROM gp_segment_configuration
WHERE mode = 'r';</pre>
</div>

                                </td>

                                <td class="entry" valign="top" headers="d75104e64 ">
                                    <p class="p">当查询有结果返回，说明有segment处于Resynchronizing 状态. 如果数据库当中记录的状态没有从'r'变为's', 检查primary和mirrorsegments的pg_log 目录下的文件来排查导致错误的原因。</p>

                                </td>

                            </tr>

                            <tr class="row">
                                <td class="entry" valign="top" headers="d75104e58 ">检查没有处于首选角色的segments.如果有结果返回，说明inHybrid集群处于不平衡的状态，则应产生警告 <p class="p">推荐频率：每5到10分执行钟一次</p>
<p class="p">级别: IMPORTANT</p>
</td>

                                <td class="entry" valign="top" headers="d75104e61 ">
                                    <div class="p">在 <samp class="ph codeph">postgres</samp>
                                        数据库执行以下查询：
                                        <pre class="pre codeblock">SELECT * FROM gp_segment_configuration
WHERE preferred_role &lt;&gt; role;</pre>
</div>

                                </td>

                                <td class="entry" valign="top" headers="d75104e64 ">
                                    <p class="p">当segments没有运行在最佳角色时,说明每个主机上的primarysegment数量不均衡，暗示存在数据倾斜，等待一个可能出现的窗口重启数据库使segment回到原来的最佳角色
.</p>

                                </td>

                            </tr>

                            <tr class="row">
                                <td class="entry" valign="top" headers="d75104e58 ">在所有的segment上面运行分布式查询. 返回结果当中应该包含每个primarysegment的信息.
                                        <p class="p">推荐频率: 每5到10分执行钟一次</p>
<p class="p">级别: CRITICAL</p>
</td>

                                <td class="entry" valign="top" headers="d75104e61 ">
                                    <div class="p">Execute the following query in the <samp class="ph codeph">postgres</samp>
                                        database:<pre class="pre codeblock">SELECT gp_segment_id, count(*)
FROM gp_dist_random('pg_class')
GROUP BY 1;</pre>
</div>

                                </td>

                                <td class="entry" valign="top" headers="d75104e64 ">
                                    <p class="p">如果该查询运行失败, 说明集群中某些primarysegment分发失效，这是很少会出现的情况 。请检查分发失败的主机确认是否是硬件或网络问题。</p>

                                </td>

                            </tr>

                            <tr class="row">
                                <td class="entry" valign="top" headers="d75104e58 ">对于inHybrid以及更早版本的集群检查master镜像. 如果查询返回的值为 "NotSynchronized", 则应该产生一个警告<p class="p">推荐频率: 每5到10分执行钟一次.</p>
<p class="p">级别: IMPORTANT</p>
</td>

                                <td class="entry" valign="top" headers="d75104e61 ">
                                    <div class="p">在 <samp class="ph codeph">postgres</samp>
                                       数据库执行以下查询：
                                        <pre class="pre codeblock">SELECT summary_state
FROM gp_master_mirroring;</pre>
</div>

                                </td>

                                <td class="entry" valign="top" headers="d75104e64 ">
                                    <p class="p">检查master和standbymaster的pg_log目录的文件是否有报错. 如果没有对应的报错信息并且没有机器故障问题, 运行 hdbinitstandby工具命令启动standby.
</p>

                                </td>

                            </tr>

                            <tr class="row">
                                <td class="entry" valign="top" headers="d75104e58 ">检查master镜像. 如果查询返回的值不为 "streaming", 则应该产生一个警告.<p class="p">推荐频率: 每5到10分执行钟一次.</p>
<p class="p">级别: IMPORTANT</p>
</td>

                                <td class="entry" valign="top" headers="d75104e61 ">
                                    <div class="p">执行下列 <samp class="ph codeph">psql</samp>
                                        指令：<pre class="pre codeblock">psql <em class="ph i">dbname</em> -c 'SELECT procpid, state FROM pg_stat_replication;'</pre>
</div>

                                </td>

                                <td class="entry" valign="top" headers="d75104e64 ">
                                    <p class="p">检查master和standbymaster的pg_log目录的文件是否有报错. 如果没有对应的报错信息并且没有机器故障问题, 运行 hdbinitstandby工具命令启动standby. </p>

                                </td>

                            </tr>

                            <tr class="row">
                                <td class="entry" valign="top" headers="d75104e58 ">执行基本的检查检测master是否启动并且正常运转 .<p class="p">推荐频率: 每5到10分执行钟一次</p>
<p class="p">级别: CRITICAL</p>
</td>

                                <td class="entry" valign="top" headers="d75104e61 ">
                                    <div class="p">在 <samp class="ph codeph">postgres</samp>
                                        数据库执行以下查询：
                                        <pre class="pre codeblock">SELECT count(*) FROM gp_segment_configuration;</pre>
</div>

                                </td>

                                <td class="entry" valign="top" headers="d75104e64 ">
                                    <p class="p">如果查询失败可能是active master关闭. 重试几次然后检查activemaster.如果activemaster被关闭,重启activemaster然后触发启动standbymaster.</p>

                                </td>

                            </tr>

                        </tbody>

                    </table>
</div>

            </div>

        </div>

        <div class="topic nested1" id="topic_atb_b2g_rp">
            <h2 class="title topictitle2">数据库告警日志监控 </h2>

            <div class="body">
                
<div class="tablenoborder">
<table cellpadding="4" cellspacing="0" summary="" id="topic_atb_b2g_rp__table_dvp_d2g_rp" class="table" frame="border" border="1" rules="all">
<caption><span class="tablecap">表 2.数据库告警日志监控</span></caption>
                        
                        
                        
                        <thead class="thead" align="left">
                            <tr class="row">
                                <th class="entry" valign="top" id="d75104e370">活动</th>

                                <th class="entry" valign="top" id="d75104e373">执行程序</th>

                                <th class="entry" valign="top" id="d75104e376">维护措施</th>

                            </tr>

                        </thead>

                        <tbody class="tbody">
                            <tr class="row">
                                <td class="entry" valign="top" headers="d75104e370 ">检查系统FATAL和ERROR级别的信息.<p class="p">推荐频率: 每15分执行钟一次。</p>
<p class="p">级别: WARNING</p>
</td>

                                <td class="entry" valign="top" headers="d75104e373 ">
                                    <div class="p">在<samp class="ph codeph">gpperfmon</samp>
                                       数据库执行以下查询:<pre class="pre codeblock">SELECT * FROM log_alert_history
WHERE logseverity in ('FATAL', 'ERROR')
   AND logtime &gt; (now() - interval '15 minutes');</pre>
</div>

                                </td>

                                <td class="entry" valign="top" headers="d75104e376 ">向DBA发送警报以分析警报。您可能需要在查询中添加其他筛选器以忽略某些感兴趣的信息.</td>

                            </tr>

                        </tbody>

                    </table>
</div>

            </div>

        </div>

        <div class="topic nested1" id="topic_y4c_4gg_rp">
            <h2 class="title topictitle2">硬件和操作系统监控</h2>

            <div class="body">
                
<div class="tablenoborder">
<table cellpadding="4" cellspacing="0" summary="" id="topic_y4c_4gg_rp__table_ls5_sgg_rp" class="table" frame="border" border="1" rules="all">
<caption><span class="tablecap">表 3. 硬件和操作系统监控</span></caption>
                        
                        
                        
                        <thead class="thead" align="left">
                            <tr class="row">
                                <th class="entry" valign="top" id="d75104e439">活动</th>

                                <th class="entry" valign="top" id="d75104e442">执行程序</th>

                                <th class="entry" valign="top" id="d75104e445">维护措施</th>

                            </tr>

                        </thead>

                        <tbody class="tbody">
                            <tr class="row">
                                <td class="entry" valign="top" headers="d75104e439 ">检查用于inHybrid数据库数据存储和操作系统的卷上的磁盘空间使用情况.
                                        <p class="p">推荐频率: 每5到30分钟</p>
<p class="p">级别: CRITICAL</p>
</td>

                                <td class="entry" valign="top" headers="d75104e442 ">
                                    <div class="p">设置一个磁盘空间检查.<ul class="ul" id="topic_y4c_4gg_rp__ul_rs1_whg_rp">
                                            <li class="li">设置一个阈值，以便在磁盘达到容量百分比时发出警报.</li>
<li class="li">建议阈值在75%.</li>

                                            <li class="li">不建议在容量接近100%的情况下运行系统.</li>

                                        </ul>
</div>

                                </td>

                                <td class="entry" valign="top" headers="d75104e445 ">通过删除一些数据或文件来释放系统上的空间。</td>

                            </tr>

                            <tr class="row">
                                <td class="entry" valign="top" headers="d75104e439 ">检查网络接口上是否有错误或丢弃的数据包。<p class="p">推荐频率：每小时</p>
<p class="p">级别:
                                        IMPORTANT</p>
</td>

                                <td class="entry" valign="top" headers="d75104e442 ">设置网络接口检查. 
</td>

                                <td class="entry" valign="top" headers="d75104e445 ">
                                    <p class="p">与网络和操作系统团队合作解决错误.
</p>

                                </td>

                            </tr>

                            <tr class="row">
                                <td class="entry" valign="top" headers="d75104e439 ">检查是否存在RAID错误或RAID性能降级。
                                        <p class="p">推荐频率：每5分钟</p>
<p class="p">级别:
                                        CRITICAL</p>
</td>

                                <td class="entry" valign="top" headers="d75104e442 ">设置RAID检查</td>

                                <td class="entry" valign="top" headers="d75104e445 ">
                                    <ul class="ul" id="topic_y4c_4gg_rp__ul_f4b_fjg_rp">
                                        <li class="li">尽快更换故障磁盘.  </li>

                                        <li class="li">与系统管理团队合作，尽快解决其他RAID或控制器错误.</li>

                                    </ul>

                                </td>

                            </tr>

                            <tr class="row">
                                <td class="entry" valign="top" headers="d75104e439 ">运行inHybrid gpcheck实用程序来测试集群的配置是否符合当前的建议. <p class="p">建议频率：创建群集或向群集添加新计算机时 
                                        </p>
<p class="p">级别: IMPORTANT</p>
</td>

                                <td class="entry" valign="top" headers="d75104e442 ">执行 <samp class="ph codeph">gpcheck</samp>.</td>

                                <td class="entry" valign="top" headers="d75104e445 ">
                                    <p class="p">与系统管理团队合作，根据gpcheck实用程序的建议更新配置.
</p>

                                </td>

                            </tr>

                            <tr class="row">
                                <td class="entry" valign="top" headers="d75104e439 ">检查是否有足够的I/O带宽和I/O倾斜. <p class="p">建议频率：创建群集或怀疑硬件问题时.

                                        </p>
</td>

                                <td class="entry" valign="top" headers="d75104e442 ">执行 inHybrid
                                    <samp class="ph codeph">hdbcheckperf</samp> 命令. </td>

                                <td class="entry" valign="top" headers="d75104e445 ">
                                    <div class="p">如果数据传输速率与以下情况不相似，则可能未指定集群: <ul class="ul" id="topic_y4c_4gg_rp__ul_elm_dkg_rp">
                                            <li class="li">每秒读取2GB磁盘</li>

                                            <li class="li">每秒1 GB磁盘写入</li>

                                            <li class="li">每秒10千兆网络读写 </li>

                                        </ul>
如果传输速率低于预期，请咨询您的数据架构师以了解性能预期. </div>

                                    <p class="p">如果群集中的计算机显示不均匀的性能配置文件，请与系统管理团队合作修复有故障的计算机.
</p>

                                </td>

                            </tr>

                        </tbody>

                    </table>
</div>

            </div>

        </div>

        <div class="topic nested1" id="topic_gbp_jng_rp">
            <h2 class="title topictitle2">目录监控</h2>

            <div class="body">
                
<div class="tablenoborder">
<table cellpadding="4" cellspacing="0" summary="" id="topic_gbp_jng_rp__table_pdq_lng_rp" class="table" frame="border" border="1" rules="all">
<caption><span class="tablecap">表 4. 目录监控</span></caption>
                        
                        
                        
                        <thead class="thead" align="left">
                            <tr class="row">
                                <th class="entry" valign="top" id="d75104e615">活动</th>

                                <th class="entry" valign="top" id="d75104e618">执行程序</th>

                                <th class="entry" valign="top" id="d75104e621">维护措施</th>

                            </tr>

                        </thead>

                        <tbody class="tbody">
                            <tr class="row">
                                <td class="entry" valign="top" headers="d75104e615 ">运行目录一致性检查，以确保集群中每个主机上的目录是一致的，并且处于良好状态<p class="p">推荐频率:每周</p>
<p class="p">级别：
                                        IMPORTANT</p>
</td>

                                <td class="entry" valign="top" headers="d75104e618 ">执行 inHybrid
                                    <samp class="ph codeph">hdbcheckcat</samp> 程序在每个数据库：<pre class="pre codeblock">hdbcheckcat -O</pre>
</td>

                                <td class="entry" valign="top" headers="d75104e621 ">为检测到的任何问题运行修复脚本。</td>

                            </tr>

                            <tr class="row">
                                <td class="entry" valign="top" headers="d75104e615 ">运行持久表目录检查<p class="p">推荐频率: 每月</p>
<p class="p">级别: CRITICAL</p>
</td>

                                <td class="entry" valign="top" headers="d75104e618 ">检查不存在对象的依赖关系。在停机期间，系统上没有用户，在每个数据库中运行inHybrid hdbcheckcat工具:<pre class="pre codeblock">hdbcheckcat -R persistent</pre>
</td>

                                <td class="entry" valign="top" headers="d75104e621 ">为检测到的任何问题运行修复脚本。</td>

                            </tr>

                            <tr class="row">
                                <td class="entry" valign="top" headers="d75104e615 ">检查没有相应pg_attribute实例的pg_class实例.<p class="p">推荐频率: 每月</p>
<p class="p">级别: IMPORTANT</p>
</td>

                                <td class="entry" valign="top" headers="d75104e618 ">在停机期间，系统上没有用户，在每个数据库中运行inHybrid hdbcheckcat工具:<pre class="pre codeblock">hdbcheckcat -R pgclass</pre>
</td>

                                <td class="entry" valign="top" headers="d75104e621 ">为检测到的任何问题运行修复脚本。</td>

                            </tr>

                            <tr class="row">
                                <td class="entry" valign="top" headers="d75104e615 ">检查泄漏的临时模式和丢失的模式定义<p class="p">推荐频率: 每月</p>
<p class="p">级别:
                                        IMPORTANT</p>
</td>

                                <td class="entry" valign="top" headers="d75104e618 ">在停机期间，系统上没有用户，在每个数据库中运行inHybrid hdbcheckcat工具:<pre class="pre codeblock">hdbcheckcat -R namespace</pre>
</td>

                                <td class="entry" valign="top" headers="d75104e621 ">为检测到的任何问题运行修复脚本。</td>

                            </tr>

                            <tr class="row">
                                <td class="entry" valign="top" headers="d75104e615 ">检查随机分布表上的约束.<p class="p">推荐频率: 每月</p>
<p class="p">级别:
                                        IMPORTANT</p>
</td>

                                <td class="entry" valign="top" headers="d75104e618 ">在停机期间，系统上没有用户，在每个数据库中运行inHybrid hdbcheckcat工具:<pre class="pre codeblock">hdbcheckcat -R distribution_policy</pre>
</td>

                                <td class="entry" valign="top" headers="d75104e621 ">为检测到的任何问题运行修复脚本。</td>

                            </tr>

                            <tr class="row">
                                <td class="entry" valign="top" headers="d75104e615 ">检查不存在对象的依赖关系。<p class="p">推荐频率：每月</p>
<p class="p">级别: IMPORTANT</p>
</td>

                                <td class="entry" valign="top" headers="d75104e618 ">在停机期间，系统上没有用户，在每个数据库中运行inHybrid hdbcheckcat工具:<pre class="pre codeblock">hdbcheckcat -R dependency</pre>
</td>

                                <td class="entry" valign="top" headers="d75104e621 ">为检测到的任何问题运行修复脚本。</td>

                            </tr>

                        </tbody>

                    </table>
</div>

            </div>

        </div>

        <div class="topic nested1" id="maintentenance_check_scripts">
            <h2 class="title topictitle2">数据维护</h2>

            <div class="body">
                
<div class="tablenoborder">
<table cellpadding="4" cellspacing="0" summary="" id="maintentenance_check_scripts__table_tp4_nxg_rp" class="table" frame="border" border="1" rules="all">
<caption><span class="tablecap">表 5.数据维护活动</span></caption>
                        
                        
                        
                        <thead class="thead" align="left">
                            <tr class="row">
                                <th class="entry" valign="top" id="d75104e790">活动</th>

                                <th class="entry" valign="top" id="d75104e793">执行程序</th>

                                <th class="entry" valign="top" id="d75104e796">维护措施</th>

                            </tr>

                        </thead>

                        <tbody class="tbody">
                            <tr class="row">
                                <td class="entry" valign="top" headers="d75104e790 ">检查表上缺少的统计信息. </td>

                                <td class="entry" valign="top" headers="d75104e793 ">检查每个数据库中的gp_stats_missing视图 ：<pre class="pre codeblock">SELECT * FROM gp_toolkit.gp_stats_missing;</pre>
</td>

                                <td class="entry" valign="top" headers="d75104e796 ">对缺少统计信息的表运行ANALYZE.</td>

                            </tr>

                            <tr class="row">
                                <td class="entry" valign="top" headers="d75104e790 ">检查数据文件中有膨胀(
deadspace)的表，这些表不能通过常规的VACUUM命令恢复。 <p class="p">建议频率:每周或每月</p>
<p class="p">级别: WARNING</p>
</td>

                                <td class="entry" valign="top" headers="d75104e793 ">检查每个数据库中的gp_bloat_diag视图: 
                                    <pre class="pre codeblock">SELECT * FROM gp_toolkit.gp_bloat_diag;</pre>
</td>

                                <td class="entry" valign="top" headers="d75104e796 ">当用户不访问表时，执行一个VACUUMFULL语句，以消除数据膨胀并压缩数据.</td>

                            </tr>

                        </tbody>

                    </table>
</div>

            </div>

        </div>

        <div class="topic nested1" id="topic_dld_23h_rp">
            <h2 class="title topictitle2">Database 维护</h2>

            <div class="body">
                <div class="p">
                    
<div class="tablenoborder">
<table cellpadding="4" cellspacing="0" summary="" id="topic_dld_23h_rp__table_vxx_f3h_rp" class="table" frame="border" border="1" rules="all">
<caption><span class="tablecap">表 6. Database 维护活动</span></caption>
                            
                            
                            
                            <thead class="thead" align="left">
                                <tr class="row">
                                    <th class="entry" valign="top" id="d75104e881">活动</th>

                                    <th class="entry" valign="top" id="d75104e884">执行程序</th>

                                    <th class="entry" valign="top" id="d75104e887">维护措施</th>

                                </tr>

                            </thead>

                            <tbody class="tbody">
                                <tr class="row">
                                    <td class="entry" valign="top" headers="d75104e881 ">在堆表中标记已删除的行，以便重用它们占用的空间。<p class="p">推荐频率:每天</p>
<p class="p">级别: CRITICAL</p>
</td>

                                    <td class="entry" valign="top" headers="d75104e884 ">Vacuum 用户数据表:<pre class="pre codeblock">VACUUM <em class="ph i">&lt;table&gt;</em>;</pre>
</td>

                                    <td class="entry" valign="top" headers="d75104e887 ">定期对表进行vacuum更新，防止数据膨胀。 
                                    </td>

                                </tr>

                                <tr class="row">
                                    <td class="entry" valign="top" headers="d75104e881 ">更新表的统计信息。<p class="p">推荐频率:在加载数据之后和执行查询之前</p>
<p class="p">级别: CRITICAL</p>
</td>

                                    <td class="entry" valign="top" headers="d75104e884 ">Analyze 用户表可以使用analyzedb管理工具:<pre class="pre codeblock">analyzedb -d <var class="keyword varname">&lt;database&gt;</var> -a</pre>
</td>

                                    <td class="entry" valign="top" headers="d75104e887 ">定期分析更新的表，以便优化器能够生成高效的查询执行计划。</td>

                                </tr>

                                <tr class="row">
                                    <td class="entry" valign="top" headers="d75104e881 ">备份数据库数据。<p class="p">推荐频率:每天，或根据您的备份计划的要求</p>
<p class="p">级别:
                                            CRITICAL</p>
</td>

                                    <td class="entry" valign="top" headers="d75104e884 ">
                                        <span class="ph">运行hdbbackup工具并行地创建Master数据库和Segment数据库的备份。</span>
                                    </td>

                                    <td class="entry" valign="top" headers="d75104e887 ">最佳实践是准备好当前备份，以备必须恢复数据库时使用。</td>

                                </tr>

                                <tr class="row">
                                    <td class="entry" valign="top" headers="d75104e881 ">对系统目录进行vacuum、reindex和analyze，以维护有效的目录。<p class="p">推荐频率: 如果频繁地创建和删除数据库对象，则每周更新一次，或者更频繁地更新一次</p>
</td>

                                    <td class="entry" valign="top" headers="d75104e884 ">
                                        <ol class="ol" id="topic_dld_23h_rp__ol_frs_nlh_rp">
                                            <li class="li">
对每个数据库中的系统表进行VACUUM处理.</li>

                                            <li class="li">在每个数据库中运行REINDEX SYSTEM，或者使用reindexdb命令行工具用 -s 选项:<br/>
<pre>reindexdb -s <database></pre>
</li>

                                            <li class="li">
<samp class="ph codeph">ANALYZE每一个系统表:<pre class="pre codeblock">analyzedb -s pg_catalog -d <var class="keyword varname">&lt;database&gt;</var></pre>
</li>

                                        </ol>

                                    </td>

                                    <td class="entry" valign="top" headers="d75104e887 ">优化器从系统表中检索信息以创建查询计划。如果允许系统表和索引随时间膨胀，那么扫描系统表会增加查询执行时间。在重索引之后运行ANALYZE非常重要，因为REINDEX只留下没有统计信息的索引。</td>

                                </tr>

                            </tbody>

                        </table>
</div>

                </div>

            </div>

        </div>

        <div class="topic nested1" id="topic_idx_smh_rp">
            <h2 class="title topictitle2">修复和升级</h2>

            <div class="body">
                
<div class="tablenoborder">
<table cellpadding="4" cellspacing="0" summary="" id="topic_idx_smh_rp__table_td5_5mh_rp" class="table" frame="border" border="1" rules="all">
<caption><span class="tablecap">表 7. 修复和升级</span></caption>
                        
                        
                        
                        <thead class="thead" align="left">
                            <tr class="row">
                                <th class="entry" valign="top" width="33.003300330033%" id="d75104e1044">活动</th>

                                <th class="entry" valign="top" width="33.66336633663366%" id="d75104e1047">执行程序</th>

                                <th class="entry" valign="top" width="33.33333333333333%" id="d75104e1050">维护措施</th>

                            </tr>

                        </thead>

                        <tbody class="tbody">
                            <tr class="row">
                                <td class="entry" valign="top" width="33.003300330033%" headers="d75104e1044 ">确保将任何错误修复或增强应用于内核。<p class="p">推荐频率: 至少每六个月</p>
<p class="p">级别: IMPORTANT</p>
</td>

                                <td class="entry" valign="top" width="33.66336633663366%" headers="d75104e1047 ">按照供应商的说明更新Linux内核。</td>

                                <td class="entry" valign="top" width="33.33333333333333%" headers="d75104e1050 ">保持内核最新，以包含错误修复和安全修复，并避免将来出现困难的升级。</td>

                            </tr>

                            <tr class="row">
                                <td class="entry" valign="top" width="33.003300330033%" headers="d75104e1044 ">安装inHybrid 数据库release镜像, 例如: 1.0.0.<p class="p">推荐频率: 每季度</p>
<p class="p">级别: IMPORTANT</p>
</td>

                                <td class="entry" valign="top" width="33.66336633663366%" headers="d75104e1047 ">遵循inHybrid数据库发行说明中的升级说明。总是升级到最新的系列。</td>

                                <td class="entry" valign="top" width="33.33333333333333%" headers="d75104e1050 ">保持inHybrid数据库软件处于最新状态，以便将bug修复、性能增强和特性增强合并到您的inHybrid集群中。</td>

                            </tr>

                        </tbody>

                    </table>
</div>

            </div>

        </div>

    </div>



        

      </main>
    </div>
  </div>
</div>

<div id="scrim"></div>

<div class="container">
  <footer class="site-footer-links">
    
  </footer>
</div><!--end of container-->

</body>
</html>
